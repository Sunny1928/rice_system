(function(){"use strict";var t={8919:function(t,e,a){var i=a(144),s=a(998),n=a(3059),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e(s.Z,[e(n.Z,[e("router-view")],1)],1)],1)},d=[],l={name:"app"},o=l,c=a(1001),m=(0,c.Z)(o,r,d,!1,null,null,null),u=m.exports,h=a(8345),p=a(4562),x=a(266),f=a(9256),v=a(1030),g=a(1267),_=a(3201),I=a(4528),b=a(1713),y=a(3687),Z=a(7808),k=function(){var t=this,e=t._self._c;return e("IndexHeader",[t.$store.state.isUserLoggedIn?e(f.Z,[e(_.Z,{staticClass:"ml-4 mr-4"},[e(g.Z,{attrs:{xs12:"","offset-xs0":""}},[e(b.Z,[e(x.Z,{attrs:{cols:"12",md:"6"}},[e(p.Z,{staticClass:"d-flex align-center",attrs:{color:"primary",dark:"",height:"300",to:{name:"inwards"}}},[e("h2",[t._v("進貨")])])],1),e(x.Z,{attrs:{cols:"12",md:"6"}},[e(p.Z,{staticClass:"d-flex align-center",attrs:{color:"primary",dark:"",height:"300",to:{name:"outwards"}}},[e("h2",[t._v("出貨")])])],1)],1),e("div",{staticClass:"border"},[e(b.Z,{staticClass:"title"},[e("h3",[t._v("其他功能")])]),e(b.Z,{staticClass:"ma-3",attrs:{justify:"center",align:"center"}},[e(x.Z,{attrs:{cols:"12",md:"6"}},[e("b",[t._v("列印所有交易資料")]),e(I.Z,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.dates,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.dates=e},"update:return-value":function(e){t.dates=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Z.Z,t._g(t._b({attrs:{label:"篩選日期","prepend-icon":"mdi-calendar",readonly:"",dense:"",outlined:"",flat:"",solo:""},model:{value:t.dateText,callback:function(e){t.dateText=e},expression:"dateText"}},"v-text-field",i,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(v.Z,{attrs:{"no-title":"",range:""},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}},[e(y.Z),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v(" Cancel ")]),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.menu.save(t.dates),t.getTrades()}}},[t._v(" OK ")])],1)],1),e("div",{staticClass:"danger-alert"},[t._v(" "+t._s(t.error)+" ")])],1),e(x.Z,{staticClass:"pa-6",attrs:{cols:"12",md:"6"}},[e(b.Z,[e("download-excel",{staticClass:"btn mr-2",attrs:{header:"出貨交易紀錄",data:t.outward_trades,fields:t.outward_json_fields,worksheet:"出貨統計",name:t.dateText+"出貨交易.xls"}},[t._v(" 下載出貨交易Excel ")]),e(p.Z,{staticClass:"mb-2",on:{click:t.printAllReceipt}},[t._v(" 列印出貨交易 ")])],1),e(b.Z,[e("download-excel",{staticClass:"btn mr-2",attrs:{header:"糧食交易紀錄",data:t.inward_rice_trades,fields:t.inward_rice_json_fields,worksheet:"糧食交易紀錄統計",name:t.dateText+"糧食交易紀錄.xls"}},[t._v(" 下載糧食交易Excel ")]),e(p.Z,{staticClass:"mb-2",on:{click:t.printInwardRiceReceipt}},[t._v(" 列印糧食進出交易 ")])],1),e(b.Z,[e("download-excel",{staticClass:"btn mr-2",attrs:{header:"客戶往來交易紀錄",data:t.inward_trades,fields:t.inward_json_fields,worksheet:"客戶往來交易紀錄",name:t.dateText+"客戶往來交易紀錄.xls"}},[t._v(" 下載客戶往來交易Excel ")]),e(p.Z,{staticClass:"mb-2",on:{click:t.printInwardReceipt}},[t._v(" 列印客戶往來交易 ")])],1)],1)],1)],1)],1)],1)],1):e(f.Z,[t._v(" 你尚未登入 ")])],1)},w=[],$=a(5716),T=a(6312),C=a(5808),S=a(4525),D=a(5200),O=function(){var t=this,e=t._self._c;return e(f.Z,[e("div",{staticClass:"t1"},[e($.Z,{attrs:{fixed:"",color:"primary",dark:""}},[e(T.Z,{staticClass:"mr-4"},[e("router-link",{staticClass:"btn_top",attrs:{tag:"span",to:{name:"root"}}},[t._v(" 年昌米廠 ")])],1),e(y.Z),t.$store.state.isUserLoggedIn?e("div",{staticClass:"d-flex"},[e(I.Z,{attrs:{"offset-y":"","open-on-hover":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("p",t._g({staticClass:"btn_top mr-4 ml-4",attrs:{plain:""}},a),[t._v(" 進貨系統 ")])]}}],null,!1,593719664)},[e(C.Z,[e(S.Z,[e(D.V9,[e("router-link",{staticClass:"link",attrs:{to:{name:"inwardsCustomer"}}},[t._v(" 顧客 ")])],1)],1),e(S.Z,[e(D.V9,[e("router-link",{staticClass:"link",attrs:{to:{name:"inwardsRicekind"}}},[t._v(" 米的種類 ")])],1)],1),e(S.Z,[e(D.V9,[e("router-link",{staticClass:"link",attrs:{to:{name:"inwardsProduct"}}},[t._v(" 商品 ")])],1)],1),e(S.Z,[e(D.V9,[e("router-link",{staticClass:"link",attrs:{to:{name:"inwardsTrade",params:{customerName:"null"}}},nativeOn:{click:function(e){return t.$router.go()}}},[t._v(" 進貨交易 ")])],1)],1)],1)],1),e(I.Z,{attrs:{"offset-y":"","open-on-hover":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("p",t._g({staticClass:"btn_top mr-4 ml-4",attrs:{plain:""}},a),[t._v(" 出貨系統 ")])]}}],null,!1,3268580792)},[e(C.Z,[e(S.Z,[e(D.V9,[e("router-link",{staticClass:"link",attrs:{to:{name:"customer"}}},[t._v(" 顧客 ")])],1)],1),e(S.Z,[e(D.V9,[e("router-link",{staticClass:"link",attrs:{to:{name:"product"}}},[t._v(" 商品 ")])],1)],1),e(S.Z,[e(D.V9,[e("router-link",{staticClass:"link",attrs:{to:{name:"sellUint"}}},[t._v(" 販賣單位 ")])],1)],1),e(S.Z,[e(D.V9,[e("router-link",{staticClass:"link",attrs:{to:{name:"cashMethod"}}},[t._v(" 入帳方式 ")])],1)],1),e(S.Z,[e(D.V9,[e("router-link",{staticClass:"link",attrs:{to:{name:"transport"}}},[t._v(" 貨運 ")])],1)],1),e(S.Z,[e(D.V9,[e("router-link",{staticClass:"link",attrs:{to:{name:"trade",params:{customerName:"null"}}},nativeOn:{click:function(e){return t.$router.go()}}},[t._v(" 出貨交易 ")])],1)],1)],1)],1)],1):t._e(),e(y.Z),e("div",[t.$store.state.isUserLoggedIn?t._e():e("router-link",{staticClass:"btn_top",attrs:{tag:"span",to:{name:"login"}}},[t._v(" 登入 ")]),t.$store.state.isUserLoggedIn?e("p",{staticClass:"btn_top",on:{click:t.logout}},[t._v(" 登出 ")]):t._e()],1)],1),e(f.Z,[t._t("default",(function(){return[t._v(" No slot content defined. ")]}))],2)],1)])},P=[],N={data(){return{}},methods:{logout(){this.$store.dispatch("setToken",null),this.$store.dispatch("setUser",null),this.$router.push({name:"login"})}}},B=N,z=(0,c.Z)(B,O,P,!1,null,"27a3275e",null),j=z.exports,q=a(9669),E=a.n(q),R=()=>E().create({baseURL:window.location.protocol+"//"+window.location.host,withCredentials:!0});const L="api/outwards/trades/";var M={index(t){return R().get(`${L}allTrades/${t}`)},indexByDates(t){return R().get(`${L}allTradesByDates/${t}`)},indexByCashmethodAndDates(t,e){return R().get(`${L}allTradesByCashmethod/${t}&${e}`)},post(t){return R().post(`${L}addTrade`,t)},put(t){return R().put(`${L}${t.id}`,t)},delete(t){return R().delete(`${L}${t.id}`)}};const A="api/inwards/othertrades/";var U={index(t){return R().get(`${A}allItems/${t}`)},getLastTrade(t){return R().get(`${A}lastItem/${t}`)},indexByDates(t){return R().get(`${A}/allItemsByDates/${t}`)},getAllItemsByProduct(t,e){return R().get(`${A}allItems/${t}/${e}`)},post(t){return R().post(`${A}addItem`,t)},put(t){return R().put(`${A}${t.id}`,t)},delete(t){return R().delete(`${A}${t.id}`)}};const W="api/inwards/ricetrades/";var V={index(t){return R().get(`${W}allItems/${t}`)},indexByDates(t){return R().get(`${W}allItemsByDates/${t}`)},getAllItemsByRicekind(t,e){return R().get(`${W}allItems/${t}/${e}`)},post(t){return R().post(`${W}addItem`,t)},get(t){return R().get(`${W}${t}`)},put(t){return R().put(`${W}${t.id}`,t)},delete(t){return R().delete(`${W}${t.id}`)},deleteById(t){return R().delete(`${W}${t}`)}},F={components:{IndexHeader:j},data(){return{error:"",menu:!1,dates:[],dateText:"",outward_json_fields:{"顧客":"customer_name","日期":{callback:t=>t.made_date.slice(0,10)},"品名":"name","數量":"amount","包數":"package","總數量":"totalNumber","單位":"sellUint","單價":"uintPrice","小計":"aTradePrice","累計":"grandPrice","貨運":"transport","備註":"comment"},inward_json_fields:{"顧客":"customer_name","日期":{callback:t=>t.made_date.slice(0,10)},"名稱":"name","單價":"uintPrice","數量":"number","小計":"aTradePrice","餘額":"grandPrice","備註":"comment"},inward_rice_json_fields:{"顧客":"customer_name","日期":{callback:t=>t.made_date.slice(0,10)},"品名":"name","進":"in","出":"out","小計":"stock","稻穀紀錄":"go","備註":"comment"},json_meta:[[{key:"charset",value:"utf-8"}]],outward_trades:[],inward_rice_trades:[],inward_trades:[]}},methods:{dateRangeText(){if(void 0==this.dates[1]&&(this.dates[1]=this.dates[0]),new Date(this.dates[0])>new Date(this.dates[1])){var t=this.dates[1];this.dates[1]=this.dates[0],this.dates[0]=t}this.dateText=this.dates[0]+"~"+this.dates[1]},async getTrades(){this.dateRangeText(),this.outward_trades=(await M.indexByDates(this.dates[0]+","+this.dates[1])).data,this.inward_trades=(await U.indexByDates(this.dates[0]+","+this.dates[1])).data,this.inward_rice_trades=(await V.indexByDates(this.dates[0]+","+this.dates[1])).data,this.error="",0==this.outward_trades.length&&(this.error+="此時段無出貨交易資料\n"),0==this.inward_rice_trades.length&&(this.error+="此時段無糧食交易資料\n"),0==this.inward_trades.length&&(this.error+="此時段無客戶往來交易資料\n")},printAllReceipt(){let t=this.$router.resolve({name:"printOutwardsAllTrade",query:{all:!0,formerSum:0,sum:0,weight:0}});this.$store.dispatch("setPrintData",this.outward_trades),this.$store.dispatch("setPrintCustomer",null),window.open(t.href,"_blank")},printInwardReceipt(){let t=this.$router.resolve({name:"printInwardsOtherTrade",query:{all:!0}});this.$store.dispatch("setPrintData",this.inward_trades),this.$store.dispatch("setPrintCustomer",null),window.open(t.href,"_blank")},printInwardRiceReceipt(){let t=this.$router.resolve({name:"printInwardsTrade",query:{all:!0}});this.$store.dispatch("setPrintData",this.inward_rice_trades),this.$store.dispatch("setPrintCustomer",this.customerInfo),window.open(t.href,"_blank")}}},H=F,K=(0,c.Z)(H,k,w,!1,null,"11e5af82",null),Y=K.exports,G=function(){var t=this,e=t._self._c;return e("IndexHeader",[e(f.Z,[e(_.Z,[e(g.Z,{attrs:{xs6:"","offset-xs3":""}},[e("panel",{attrs:{title:"Register"}},[e("div",{staticClass:"pl-4 pr-4 pt-2 pb-2"},[e(Z.Z,{attrs:{label:"Account"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}),e(Z.Z,{attrs:{label:"Password",type:"password",autocomplete:"new-password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e(p.Z,{attrs:{dark:"",color:"primary"},on:{click:t.register}},[t._v(" Register ")])],1)])],1)],1)],1)],1)},J=[],Q={register(t){return R().post("api/users/addUser",t)},login(t){return R().post("api/users/login",t)}},X=function(){var t=this,e=t._self._c;return e("div",{staticClass:"white elevation-2"},[e($.Z,{attrs:{flat:"",dense:"",color:"primary",dark:""}},[e(T.Z,[t._v(t._s(t.title))])],1),t._t("default",(function(){return[t._v(" No slot content defined. ")]}))],2)},tt=[],et={props:["title"]},at=et,it=(0,c.Z)(at,X,tt,!1,null,null,null),st=it.exports,nt={components:{Panel:st,IndexHeader:j},data(){return{account:"",password:"",error:null}},methods:{async register(){try{const t=await Q.register({account:this.account,password:this.password});this.$store.dispatch("setToken",t.data.token),this.$store.dispatch("setUser",t.data.user)}catch(t){console.log(t)}}}},rt=nt,dt=(0,c.Z)(rt,G,J,!1,null,"e69b6abc",null),lt=dt.exports,ot=function(){var t=this,e=t._self._c;return e("IndexHeader",[e(f.Z,[e(_.Z,[e(g.Z,{attrs:{xs6:"","offset-xs3":""}},[e("panel",{attrs:{title:"登入"}},[e("div",{staticClass:"pl-4 pr-4 pt-2 pb-2"},[e(Z.Z,{attrs:{label:"帳號"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}),e(Z.Z,{attrs:{label:"密碼",type:"password",autocomplete:"new-password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t.error?e("div",{staticClass:"danger-alert"},[t._v(t._s(t.error))]):t._e(),e(p.Z,{attrs:{dark:"",color:"primary"},on:{click:t.login}},[t._v(" 登入 ")])],1)])],1)],1)],1)],1)},ct=[],mt={components:{Panel:st,IndexHeader:j},data(){return{account:"",password:"",error:null}},methods:{async login(){this.$loading(!0);try{const t=await Q.login({account:this.account,password:this.password});this.$store.dispatch("setToken",t.data.token),this.$store.dispatch("setUser",t.data.user),this.$router.push({name:"root"})}catch(t){this.error=t.response.data.error}this.$loading(!1)}}},ut=mt,ht=(0,c.Z)(ut,ot,ct,!1,null,null,null),pt=ht.exports,xt=function(){var t=this,e=t._self._c;return e("titlepanel",{attrs:{title:"出 貨 "}},[e(_.Z,[e(g.Z,{attrs:{xs12:"","offset-xs0":""}},[e(b.Z,[e(x.Z,{attrs:{cols:"12",md:"3"}},[e(p.Z,{staticClass:"d-flex align-center",attrs:{color:"primary",dark:"",height:"200",to:{name:"customer"}}},[e("h3",[t._v("顧客")])])],1),e(x.Z,{attrs:{cols:"12",md:"3"}},[e(p.Z,{staticClass:"d-flex align-center",attrs:{color:"primary",dark:"",height:"200",to:{name:"product"}}},[e("h3",[t._v("產品")])])],1),e(x.Z,{attrs:{cols:"12",md:"2"}},[e(p.Z,{staticClass:"d-flex align-center",attrs:{color:"primary",dark:"",height:"200",to:{name:"sellUint"}}},[e("h3",[t._v("販賣單位")])])],1),e(x.Z,{attrs:{cols:"12",md:"2"}},[e(p.Z,{staticClass:"d-flex align-center",attrs:{color:"primary",dark:"",height:"200",to:{name:"cashMethod"}}},[e("h3",[t._v("入帳方式")])])],1),e(x.Z,{attrs:{cols:"12",md:"2"}},[e(p.Z,{staticClass:"d-flex align-center",attrs:{color:"primary",dark:"",height:"200",to:{name:"transport"}}},[e("h3",[t._v("貨運")])])],1)],1),e("br"),e(b.Z,[e(x.Z,{attrs:{cols:"12",md:"12"}},[e(p.Z,{staticClass:"d-flex align-center",attrs:{color:"primary",dark:"",height:"200",to:{name:"trade",params:{customerName:"null"}}}},[e("h3",[t._v("交易")])])],1)],1)],1)],1)],1)},ft=[],vt=function(){var t=this,e=t._self._c;return e("IndexHeader",[t.$store.state.isUserLoggedIn?e(f.Z,[e("h1",[t._v(t._s(t.title)+" 系 統")]),e("br"),t._t("default",(function(){return[t._v(" No slot content defined. ")]}))],2):e(f.Z,[t._v(" You have not login in yet ")])],1)},gt=[],_t={props:["title"],components:{IndexHeader:j}},It=_t,bt=(0,c.Z)(It,vt,gt,!1,null,"507493ac",null),yt=bt.exports,Zt={components:{Titlepanel:yt},data(){return{}}},kt=Zt,wt=(0,c.Z)(kt,xt,ft,!1,null,"8d88e936",null),$t=wt.exports,Tt=a(4145),Ct=a(4886),St=a(2374),Dt=a(9930),Ot=a(4324),Pt=a(1783),Nt=function(){var t=this,e=t._self._c;return e("titlepanel",{attrs:{title:"出 貨 "}},[e("div",{staticClass:"white"},[e("div",{staticClass:"subTitle"},[e("b",[t._v("交易日期篩選條件")])]),e(b.Z,[e(x.Z,{attrs:{cols:"12",md:"3"}},[e(I.Z,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Z.Z,t._g(t._b({attrs:{label:"篩選日期","prepend-icon":"mdi-calendar",readonly:"",dense:"",outlined:"",flat:"",solo:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"v-text-field",i,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(v.Z,{attrs:{"no-title":"",scrollable:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[e(y.Z),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v(" Cancel ")]),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.date)}}},[t._v(" OK ")])],1)],1)],1),e(x.Z,{staticClass:"d-flex pt-3",attrs:{cols:"12",md:"3"}},[e(p.Z,{attrs:{disabled:null==t.date},on:{click:t.serchDateCustomer}},[t._v(" 搜尋 ")]),e(p.Z,{staticClass:"ml-2"},[e(Ot.Z,{attrs:{small:""},on:{click:t.initialize}},[t._v(" mdi-refresh ")])],1)],1)],1)],1),e(Tt.Z,[e(Ct.EB,[t._v(" 顧客資料 "),e(y.Z),e(Z.Z,{attrs:{"append-icon":"mdi-magnify",label:"搜尋顧客","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(St.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.customers,"items-per-page":10,"item-key":"name",search:t.search,"custom-filter":t.filterOnlyCapsText},scopedSlots:t._u([{key:"footer",fn:function(){return[e(Pt.Z,{attrs:{flat:""}},[e(y.Z),e(Dt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(p.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),a),[t._v(" 新增顧客 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Tt.Z,[e(Ct.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(Ct.ZB,[e(f.Z,[e(b.Z,[-1==t.editedIndex?e(Z.Z,{attrs:{label:"顧客姓名",rules:[t.required]},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}}):e(Z.Z,{attrs:{label:"顧客姓名（無法修改）",readonly:"",rules:[t.required]},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"地址"},model:{value:t.editedItem.address,callback:function(e){t.$set(t.editedItem,"address",e)},expression:"editedItem.address"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"住家電話"},model:{value:t.editedItem.homePhone,callback:function(e){t.$set(t.editedItem,"homePhone",e)},expression:"editedItem.homePhone"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"手機電話"},model:{value:t.editedItem.phone,callback:function(e){t.$set(t.editedItem,"phone",e)},expression:"editedItem.phone"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"聯絡人"},model:{value:t.editedItem.contact,callback:function(e){t.$set(t.editedItem,"contact",e)},expression:"editedItem.contact"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"統編/身分證號碼"},model:{value:t.editedItem.taxId,callback:function(e){t.$set(t.editedItem,"taxId",e)},expression:"editedItem.taxId"}})],1)],1),t.error?e(f.Z,{staticClass:"danger-alert"},[t._v(" "+t._s(t.error)+" ")]):t._e()],1),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(p.Z,{attrs:{color:"blue darken-1",text:"",disabled:""==t.editedItem.name},on:{click:t.save}},[t._v(" 儲存 ")])],1)],1)],1),e(Dt.Z,{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(Tt.Z,[e(Ct.EB,{staticClass:"text-h5"},[t._v("你確定要刪掉這個客戶嗎？")]),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("確認")]),e(y.Z)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")]),e(Ot.Z,{attrs:{small:""},on:{click:function(e){return t.navigateTo({name:"trade",params:{customerName:a.name}})}}},[t._v(" mdi-eye ")])]}},{key:"no-data",fn:function(){return[e("p",{staticClass:"ma-3"},[t._v("你還沒新增資料")]),e("p",{staticClass:"ma-3"},[t._v("如果你新增了，可以按下面的按鈕重整")]),e(p.Z,{staticClass:"mb-3",attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" 重整 ")])]},proxy:!0}])})],1)],1)},Bt=[];const zt="api/outwards/customers/";var jt={index(){return R().get(`${zt}allCustomers`)},get(t){return R().get(`${zt}${t}`)},post(t){return R().post(`${zt}addCustomer`,t)},put(t){return R().put(`${zt}${t.id}`,t)},delete(t){return R().delete(`${zt}${t.id}`)}},qt={components:{Titlepanel:yt},data:()=>({search:"",date:"",menu:!1,error:"",required:t=>!!t||"Required.",dialog:!1,dialogDelete:!1,headers:[{text:"顧客",align:"start",sortable:!1,value:"name"},{text:"地址",value:"address",sortable:!1},{text:"住家電話",value:"homePhone",sortable:!1,width:"120px"},{text:"手機電話",value:"phone",sortable:!1,width:"120px"},{text:"聯絡人",value:"contact",sortable:!1},{text:"統編/身分證號碼",value:"taxId",sortable:!1,width:"130px"},{text:"功能",value:"actions",sortable:!1}],customers:[],editedIndex:-1,editedItem:{name:"",address:"",phone:"",homePhone:"",contact:"",taxId:""},defaultItem:{name:"",address:"",phone:"",homePhone:"",contact:"",taxId:""}}),computed:{formTitle(){return-1===this.editedIndex?"新增顧客":"編輯顧客"}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},created(){this.$loading(!0),this.initialize(),this.$loading(!1)},methods:{filterOnlyCapsText(t,e,a){return null!=t&&null!=e&&"string"===typeof t&&-1!==t.toString().indexOf(e)},async serchDateCustomer(){this.$loading(!0);var t=(await M.indexByDates([this.date,this.date])).data,e=new Set;t.forEach((t=>{e.add(t.customer_name)})),this.customers=[];for(const i of e.values()){var a=(await jt.get(i)).data[0];this.customers.push(a)}this.customers.sort(((t,e)=>t.name.localeCompare(e.name,"zh-Hant"))),this.$loading(!1)},navigateTo(t){this.$router.push(t)},async initialize(){this.customers=(await jt.index()).data},editItem(t){this.editedIndex=this.customers.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.customers.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},async deleteItemConfirm(){this.$loading(!0);try{await jt["delete"](this.editedItem),this.closeDelete()}catch(t){console.log(t)}this.initialize(),this.$loading(!1)},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})),this.error=""},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},async save(){if(this.$loading(!0),this.editedIndex>-1)try{await jt.put(this.editedItem),Object.assign(this.customers[this.editedIndex],this.editedItem)}catch(t){console.log(t)}else{const e=t=>t.name==this.editedItem.name;if(this.customers.some(e))return this.error="你有相同的顧客名字",void this.$loading(!1);try{await jt.post(this.editedItem),this.initialize()}catch(t){console.log(t)}}this.close(),this.$loading(!1)}}},Et=qt,Rt=(0,c.Z)(Et,Nt,Bt,!1,null,null,null),Lt=Rt.exports,Mt=function(){var t=this,e=t._self._c;return e("titlepanel",{attrs:{title:"出 貨 "}},[e(Tt.Z,[e(Ct.EB,[t._v(" 貨運資料 "),e(y.Z),e(Z.Z,{attrs:{"append-icon":"mdi-magnify",label:"搜尋貨運","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(St.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.transports,"items-per-page":10,"item-key":"name",search:t.search,"custom-filter":t.filterOnlyCapsText},scopedSlots:t._u([{key:"footer",fn:function(){return[e(Pt.Z,{attrs:{flat:""}},[e(y.Z),e(Dt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(p.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),a),[t._v(" 新增貨運 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Tt.Z,[e(Ct.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(Ct.ZB,[e(f.Z,[e(b.Z,[e(Z.Z,{attrs:{label:"貨運名稱",rules:[t.required]},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"車牌"},model:{value:t.editedItem.license,callback:function(e){t.$set(t.editedItem,"license",e)},expression:"editedItem.license"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"電話"},model:{value:t.editedItem.phone,callback:function(e){t.$set(t.editedItem,"phone",e)},expression:"editedItem.phone"}})],1)],1),t.error?e(f.Z,{staticClass:"danger-alert"},[t._v(" "+t._s(t.error)+" ")]):t._e()],1),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(p.Z,{attrs:{color:"blue darken-1",text:"",disabled:""==t.editedItem.name},on:{click:t.save}},[t._v(" 儲存 ")])],1)],1)],1),e(Dt.Z,{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(Tt.Z,[e(Ct.EB,{staticClass:"text-h5"},[t._v("你確定要刪掉這個貨運品項嗎？")]),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("確認")]),e(y.Z)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[e("p",{staticClass:"ma-3"},[t._v("你還沒新增資料")]),e("p",{staticClass:"ma-3"},[t._v("如果你新增了，可以按下面的按鈕重整")]),e(p.Z,{staticClass:"mb-3",attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" 重整 ")])]},proxy:!0}])})],1)],1)},At=[];const Ut="api/outwards/";var Wt={index(){return R().get(`${Ut}transports/allTransports`)},post(t){return R().post(`${Ut}transports/addTransport`,t)},put(t){return R().put(`${Ut}transports/${t.id}`,t)},delete(t){return R().delete(`${Ut}transports/${t.id}`)}},Vt={components:{Titlepanel:yt},data:()=>({search:"",error:"",required:t=>!!t||"Required.",dialog:!1,dialogDelete:!1,headers:[{text:"貨運名稱",align:"start",sortable:!1,value:"name"},{text:"車牌",value:"license",sortable:!1},{text:"電話",value:"phone",sortable:!1},{text:"功能",value:"actions",sortable:!1}],transports:[],editedIndex:-1,editedItem:{name:"",address:"",phone:""},defaultItem:{name:"",license:"",phone:""}}),computed:{formTitle(){return-1===this.editedIndex?"新增貨運":"編輯貨運"}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},created(){this.$loading(!0),this.initialize(),this.$loading(!1)},methods:{filterOnlyCapsText(t,e,a){return null!=t&&null!=e&&"string"===typeof t&&-1!==t.toString().indexOf(e)},async initialize(){this.transports=(await Wt.index()).data},editItem(t){this.editedIndex=this.transports.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.transports.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},async deleteItemConfirm(){this.$loading(!0);try{await Wt["delete"](this.editedItem),this.closeDelete()}catch(t){console.log(t)}this.initialize(),this.$loading(!1)},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})),this.error=""},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},async save(){if(this.$loading(!0),this.editedIndex>-1)try{await Wt.put(this.editedItem),Object.assign(this.transports[this.editedIndex],this.editedItem)}catch(t){console.log(t)}else{const e=t=>t.name==this.editedItem.name;if(this.transports.some(e))return this.error="你有相同的貨運名字",void this.$loading(!1);try{await Wt.post(this.editedItem),this.initialize()}catch(t){console.log(t)}}this.close(),this.$loading(!1)}}},Ft=Vt,Ht=(0,c.Z)(Ft,Mt,At,!1,null,null,null),Kt=Ht.exports,Yt=a(9481),Gt=function(){var t=this,e=t._self._c;return e("titlepanel",{attrs:{title:"出 貨 "}},[e(Tt.Z,[e(Ct.EB,[t._v(" 商品資訊 "),e(y.Z),e(Z.Z,{attrs:{"append-icon":"mdi-magnify",label:"搜尋商品","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(St.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.products,"items-per-page":10,"item-key":"name",search:t.search,"custom-filter":t.filterOnlyCapsText},scopedSlots:t._u([{key:"footer",fn:function(){return[e(Pt.Z,{attrs:{flat:""}},[e(y.Z),e(Dt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(p.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),a),[t._v(" 新增商品 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Tt.Z,[e(Ct.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(Ct.ZB,[e(f.Z,[-1!=t.editedIndex?e("div",[e(b.Z,[e(Z.Z,{attrs:{label:"商品名稱（無法修改）",readonly:""},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(b.Z,[e(Z.Z,{staticClass:"pr-4",attrs:{label:"數量（無法修改）",readonly:""},model:{value:t.editedItem.number,callback:function(e){t.$set(t.editedItem,"number",e)},expression:"editedItem.number"}}),e(Yt.Z,{attrs:{items:t.productUints,label:"單位（無法修改）",readonly:""},model:{value:t.editedItem.uint,callback:function(e){t.$set(t.editedItem,"uint",e)},expression:"editedItem.uint"}})],1)],1):e("div",[e(b.Z,[e(Z.Z,{attrs:{label:"商品名稱",rules:[t.required]},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(b.Z,[e(Z.Z,{staticClass:"pr-4",attrs:{label:"數量",rules:[t.required]},model:{value:t.editedItem.number,callback:function(e){t.$set(t.editedItem,"number",e)},expression:"editedItem.number"}}),e(Yt.Z,{attrs:{items:t.productUints,label:"單位",rules:[t.required]},model:{value:t.editedItem.uint,callback:function(e){t.$set(t.editedItem,"uint",e)},expression:"editedItem.uint"}})],1)],1),e(b.Z,[e(Yt.Z,{staticClass:"pr-4",attrs:{items:t.productSellUint,label:"販賣單位",rules:[t.required]},model:{value:t.editedItem.sellUint,callback:function(e){t.$set(t.editedItem,"sellUint",e)},expression:"editedItem.sellUint"}}),e(Z.Z,{attrs:{label:"單價",rules:[t.required]},model:{value:t.editedItem.price,callback:function(e){t.$set(t.editedItem,"price",e)},expression:"editedItem.price"}})],1)],1),t.error?e(f.Z,{staticClass:"danger-alert"},[t._v(" "+t._s(t.error)+" ")]):t._e()],1),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(p.Z,{attrs:{color:"blue darken-1",text:"",disabled:""==t.editedItem.name||""==t.editedItem.number||""==t.editedItem.uint||""==t.editedItem.sellUint||""==t.editedItem.price},on:{click:t.save}},[t._v(" 儲存 ")])],1)],1)],1),e(Dt.Z,{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(Tt.Z,[e(Ct.EB,{staticClass:"text-h5"},[t._v("你確定要刪掉這個商品嗎？")]),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("確認")]),e(y.Z)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e(Ot.Z,{attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[e("p",{staticClass:"ma-3"},[t._v("你還沒新增資料")]),e("p",{staticClass:"ma-3"},[t._v("如果你新增了，可以按下面的按鈕重整")]),e(p.Z,{staticClass:"mb-3",attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" 重整 ")])]},proxy:!0}])})],1)],1)},Jt=[];const Qt="api/outwards/";var Xt={index(){return R().get(`${Qt}products/allProducts`)},post(t){return R().post(`${Qt}products/addProduct`,t)},put(t){return R().put(`${Qt}products/${t.id}`,t)},delete(t){return R().delete(`${Qt}products/${t.id}`)}};const te="api/outwards/";var ee={index(){return R().get(`${te}sellUints/allSellUints`)},post(t){return R().post(`${te}sellUints/addSellUint`,t)},put(t){return R().put(`${te}sellUints/${t.id}`,t)},delete(t){return R().delete(`${te}sellUints/${t.id}`)}},ae={components:{Titlepanel:yt},data:()=>({search:"",error:"",productUints:["公斤","台斤","件","批"],productSellUint:[],required:t=>!!t||"Required.",dialog:!1,dialogDelete:!1,headers:[{text:"商品",align:"start",sortable:!1,value:"name"},{text:"數量",value:"number",sortable:!1},{text:"單位",value:"uint",sortable:!1},{text:"販賣單位",value:"sellUint",sortable:!1},{text:"單價",value:"price",sortable:!1},{text:"功能",value:"actions",sortable:!1}],products:[],editedIndex:-1,editedItem:{name:"",number:"",uint:"",sellUint:"",price:""},defaultItem:{name:"",number:"",uint:"",sellUint:"",price:""}}),computed:{formTitle(){return-1===this.editedIndex?"新增商品":"編輯商品"}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},created(){this.$loading(!0),this.initialize(),this.$loading(!1)},methods:{filterOnlyCapsText(t,e,a){return null!=t&&null!=e&&"string"===typeof t&&-1!==t.toString().indexOf(e)},checkInp(t){return!!isNaN(t)&&(this.error="請輸入正確格式",!0)},async initialize(){this.products=(await Xt.index()).data,this.productSellUint=(await ee.index()).data.map((t=>t.name)).sort(((t,e)=>t.localeCompare(e,"zh-Hant")))},editItem(t){this.editedIndex=this.products.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.products.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},async deleteItemConfirm(){this.$loading(!0);try{await Xt["delete"](this.editedItem),this.closeDelete()}catch(t){console.log(t)}this.initialize(),this.$loading(!1)},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})),this.error=""},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},async save(){this.$loading(!0);var t=this.editedItem;if(this.checkInp(t.number)||this.checkInp(t.price))this.$loading(!1);else{if(this.editedIndex>-1)try{await Xt.put(t),this.initialize()}catch(e){console.log(e)}else{t.full_name=`${t.name}${t.number}${t.uint}`;try{await Xt.post(t),this.initialize()}catch(e){console.log(e)}}this.close(),this.$loading(!1)}}}},ie=ae,se=(0,c.Z)(ie,Gt,Jt,!1,null,null,null),ne=se.exports,re=a(344),de=a(9223),le=a(1023),oe=a(7953),ce=function(){var t=this,e=t._self._c;return e("titlepanel",{attrs:{title:"出 貨 "}},[e("div",{staticClass:"white"},[e("div",{staticClass:"subTitle"},[e("b",[t._v("篩選條件")])]),e(b.Z,[e(x.Z,{attrs:{cols:"12",md:"3"}},[e(re.Z,{attrs:{items:t.customerNames,label:"顧客選項",dense:"",outlined:"",solo:""},model:{value:t.searchCustomer,callback:function(e){t.searchCustomer=e},expression:"searchCustomer"}})],1),e(x.Z,{staticClass:"pt-3",attrs:{cols:"12",md:"1"}},[e(p.Z,{staticClass:"d-flex",attrs:{depressed:"",disabled:"null"==t.searchCustomer,to:{name:"trade",params:{customerName:t.searchCustomer}}},on:{click:this.initialize}},[t._v(" 搜尋 ")])],1),e(x.Z,{attrs:{cols:"12",md:"3"}},[e(I.Z,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.dates,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.dates=e},"update:return-value":function(e){t.dates=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Z.Z,t._g(t._b({attrs:{label:"篩選日期","prepend-icon":"mdi-calendar",readonly:"",dense:"",outlined:"",flat:"",solo:""},model:{value:t.dateText,callback:function(e){t.dateText=e},expression:"dateText"}},"v-text-field",i,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(v.Z,{attrs:{"no-title":"",range:""},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}},[e(y.Z),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v(" Cancel ")]),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.menu.save(t.dates),t.filterTrades()}}},[t._v(" OK ")])],1)],1)],1),e(x.Z,{staticClass:"d-flex flex-row",attrs:{cols:"12",md:"4"}},[e(p.Z,{on:{click:function(e){return t.changeDate("today")}}},[t._v("今日")]),e(p.Z,{on:{click:function(e){return t.changeDate("week")}}},[t._v("前七日")]),e(p.Z,{on:{click:function(e){return t.changeDate("month")}}},[t._v("前一個月")]),e(p.Z,{on:{click:function(e){return t.changeDate("year")}}},[t._v("前一年")])],1)],1)],1),"null"==t.customerName?e("div",[t._v("請選擇上面的顧客選項")]):e(St.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.trades,"items-per-page":10},scopedSlots:t._u([{key:"footer",fn:function(){return[e(Pt.Z,{attrs:{flat:""}},[e("div",[e(oe.qW,[t._v(t._s(t.customerName)+" 交易資料")]),e("p",[t._v(t._s(t.customerInfo.homePhone)+" | "+t._s(t.customerInfo.phone))])],1),e(de.Z,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e(y.Z),e(Dt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e("download-excel",{staticClass:"btn",attrs:{header:`交 易 紀 錄\n年昌碾米工廠 地址: 玉里中華路28號\n電話: 03-8883066 03-8882066 傳真: 03-8881066\n 廠商編號：${t.customerInfo.taxId} 廠商姓名： ${t.customerInfo.name}\n 廠商地址： ${t.customerInfo.address}\n 廠商手機： ${t.customerInfo.homePhone} 廠商手機： ${t.customerInfo.phone}`,data:t.trades,fields:t.json_fields,worksheet:"出貨統計",name:t.customerName+"出貨交易.xls"}},[t._v(" 下載Excel ")]),e(p.Z,{staticClass:"mb-2 mr-2",on:{click:t.printEnvelope}},[t._v(" 列印信封 ")]),e(p.Z,{staticClass:"mb-2 mr-2",on:{click:t.printAllReceipt}},[t._v(" 列印交易紀錄 ")]),e(p.Z,{staticClass:"mb-2 mr-2",on:{click:t.printSomeReceipt}},[t._v(" 列印出貨單 ")]),e(p.Z,t._g(t._b({staticClass:"mb-2 mr-2",attrs:{color:"primary"}},"v-btn",i,!1),a),[t._v(" 新增交易 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Tt.Z,{staticClass:"change-position"},[e(Ct.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))]),e(y.Z),-1==t.editedIndex?e(le.Z,{attrs:{inset:"",label:""+(!0===t.switch1?"付款模式":"訂單模式")},on:{change:function(e){t.editedItem=Object.assign({},t.defaultItem)}},model:{value:t.switch1,callback:function(e){t.switch1=e},expression:"switch1"}}):t._e()],1),e(Ct.ZB,[t.switch1?e(f.Z,[e(b.Z,[-1!=t.editedIndex?e(Z.Z,{attrs:{label:"交易日期（無法修改）",readonly:""},model:{value:t.formMadeDate,callback:function(e){t.formMadeDate=e},expression:"formMadeDate"}}):e(I.Z,{ref:"menu_made_date",attrs:{"close-on-content-click":!1,"return-value":t.editedItem.made_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){return t.$set(t.editedItem,"made_date",e)},"update:return-value":function(e){return t.$set(t.editedItem,"made_date",e)}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Z.Z,t._g(t._b({attrs:{label:"交易日期","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.editedItem.made_date,callback:function(e){t.$set(t.editedItem,"made_date",e)},expression:"editedItem.made_date"}},"v-text-field",i,!1),a))]}}]),model:{value:t.menu_made_date,callback:function(e){t.menu_made_date=e},expression:"menu_made_date"}},[e(v.Z,{attrs:{"no-title":"",scrollable:""},model:{value:t.editedItem.made_date,callback:function(e){t.$set(t.editedItem,"made_date",e)},expression:"editedItem.made_date"}},[e(y.Z),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu_made_date=!1}}},[t._v(" Cancel ")]),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu_made_date.save(t.editedItem.made_date)}}},[t._v(" OK ")])],1)],1)],1),e(b.Z,[e(re.Z,{attrs:{items:t.cashMethod,label:"入帳選項",rules:[t.required]},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"現金收款",rules:[t.required]},model:{value:t.editedItem.aTradePrice,callback:function(e){t.$set(t.editedItem,"aTradePrice",e)},expression:"editedItem.aTradePrice"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"備註"},model:{value:t.editedItem.comment,callback:function(e){t.$set(t.editedItem,"comment",e)},expression:"editedItem.comment"}})],1)],1):e(f.Z,[e(b.Z,[-1!=t.editedIndex?e(Z.Z,{attrs:{label:"交易日期（無法修改）",readonly:""},model:{value:t.formMadeDate,callback:function(e){t.formMadeDate=e},expression:"formMadeDate"}}):e(I.Z,{ref:"menu_made_date",attrs:{"close-on-content-click":!1,"return-value":t.editedItem.made_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){return t.$set(t.editedItem,"made_date",e)},"update:return-value":function(e){return t.$set(t.editedItem,"made_date",e)}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Z.Z,t._g(t._b({attrs:{label:"交易日期","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.editedItem.made_date,callback:function(e){t.$set(t.editedItem,"made_date",e)},expression:"editedItem.made_date"}},"v-text-field",i,!1),a))]}}],null,!1,545477903),model:{value:t.menu_made_date,callback:function(e){t.menu_made_date=e},expression:"menu_made_date"}},[e(v.Z,{attrs:{"no-title":"",scrollable:""},model:{value:t.editedItem.made_date,callback:function(e){t.$set(t.editedItem,"made_date",e)},expression:"editedItem.made_date"}},[e(y.Z),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu_made_date=!1}}},[t._v(" Cancel ")]),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu_made_date.save(t.editedItem.made_date)}}},[t._v(" OK ")])],1)],1)],1),e(b.Z,[e(x.Z,{staticClass:"pa-0"},[e(re.Z,{attrs:{items:t.productNames,label:"商品選項",rules:[t.required]},on:{input:t.chooseProduct},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(x.Z,{staticClass:"ml-2 pa-0"},[e(Z.Z,{attrs:{label:"單價",rules:[t.required]},model:{value:t.editedItem.uintPrice,callback:function(e){t.$set(t.editedItem,"uintPrice",e)},expression:"editedItem.uintPrice"}})],1)],1),e(b.Z,[e(Z.Z,{attrs:{label:"數量",rules:[t.required]},model:{value:t.editedItem.amount,callback:function(e){t.$set(t.editedItem,"amount",e)},expression:"editedItem.amount"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"包數",rules:[t.required]},model:{value:t.editedItem.package,callback:function(e){t.$set(t.editedItem,"package",e)},expression:"editedItem.package"}})],1),e(b.Z,[e(re.Z,{attrs:{items:t.transportNames,label:"貨運"},model:{value:t.editedItem.transport,callback:function(e){t.$set(t.editedItem,"transport",e)},expression:"editedItem.transport"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"備註"},model:{value:t.editedItem.comment,callback:function(e){t.$set(t.editedItem,"comment",e)},expression:"editedItem.comment"}})],1)],1),t.error?e(f.Z,{staticClass:"danger-alert"},[t._v(" "+t._s(t.error)+" ")]):t._e()],1),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),t.switch1?e(p.Z,{attrs:{color:"blue darken-1",text:"",disabled:""==t.editedItem.name||""==t.editedItem.aTradePrice||""==t.editedItem.made_date},on:{click:t.save}},[t._v(" 儲存 ")]):e(p.Z,{attrs:{color:"blue darken-1",text:"",disabled:""==t.editedItem.name||""==t.editedItem.uintPrice||""==t.editedItem.amount||""==t.editedItem.package||""==t.editedItem.made_date||""==t.editedItem.uintPrice},on:{click:t.save}},[t._v(" 儲存 ")])],1)],1)],1),e(Dt.Z,{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(Tt.Z,[e(Ct.EB,{staticClass:"text-h5"},[t._v("你確定要刪掉這個交易嗎？")]),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("確認")]),e(y.Z)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[e("p",{staticClass:"ma-3"},[t._v("你還沒新增資料")]),e("p",{staticClass:"ma-3"},[t._v("如果你新增了，可以按下面的按鈕重整")]),e(p.Z,{staticClass:"mb-3",attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" 重整 ")])]},proxy:!0},t._l(t.headers.filter((t=>t.hasOwnProperty("formatter"))),(function(a){return{key:`item.${a.value}`,fn:function({header:a,value:i}){return["grandPrice"==a.value&&i>0?e("div",{staticClass:"blue-text"},[t._v(" "+t._s(a.formatter(i))+" ")]):"grandPrice"==a.value&&i<0?e("div",{staticClass:"red-text"},[t._v(" "+t._s(a.formatter(i))+" ")]):"grandPrice"==a.value&&0==i?e("div",{staticClass:"zero"},[t._v(" "+t._s(a.formatter(i))+" ")]):e("div",[t._v(" "+t._s(a.formatter(i))+" ")])]}}}))],null,!0)})],1)},me=[];const ue="api/outwards/";var he={index(){return R().get(`${ue}cashMethods/allcashMethods`)},post(t){return R().post(`${ue}cashMethods/addcashMethod`,t)},put(t){return R().put(`${ue}cashMethods/${t.id}`,t)},delete(t){return R().delete(`${ue}cashMethods/${t.id}`)}},pe={components:{Titlepanel:yt},data:()=>({error:"",json_fields:{"日期":{callback:t=>t.made_date.slice(0,10)},"品名":"name","數量":"amount","包數":"package","總數量":"totalNumber","單位":"sellUint","單價":"uintPrice","小計":"aTradePrice","累計":"grandPrice","貨運":"transport","備註":"comment"},json_meta:[[{key:"charset",value:"utf-8"}]],formerSum:0,sum:0,weight:0,today:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),dateText:"",dates:[],menu:!1,menu_made_date:!1,searchCustomer:"null",switch1:!1,cashMethod:[],productNames:[],transportNames:[],customerNames:[],customerName:"",customerInfo:{},required:t=>0!==(t+"").length||"Required.",dialog:!1,dialogDelete:!1,dialogCashTime:!1,headers:[{text:"日期",value:"made_date",sortable:!1,width:"105px",formatter:t=>t.slice(0,10)},{text:"產品",align:"start",sortable:!1,value:"name"},{text:"數量",value:"amount",sortable:!1,formatter:t=>t?(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,","):"-"},{text:"包數",value:"package",sortable:!1,formatter:t=>t?(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,","):"-"},{text:"總數量",value:"totalNumber",sortable:!1,formatter:t=>t?(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,","):"-"},{text:"單位",value:"sellUint",sortable:!1,formatter:t=>t||"-"},{text:"單價",value:"uintPrice",sortable:!1,formatter:t=>null!=t?(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,","):"-"},{text:"小計",value:"aTradePrice",sortable:!1,formatter:t=>null!=t?(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,","):"-"},{text:"累計",value:"grandPrice",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"貨運",value:"transport",sortable:!1,formatter:t=>t||"-"},{text:"備註",value:"comment",sortable:!1},{text:"功能",value:"actions",sortable:!1,width:"10%"}],cashMethodArr:[],changeItemId:null,productArr:[],trades:[],allTrades:[],editedIndex:-1,editedItem:{name:"",uintPrice:"",amount:"",package:"",aTradePrice:"",transport:"",comment:"",made_date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)},defaultItem:{name:"",uintPrice:"",amount:"",package:"",aTradePrice:"",transport:"",comment:"",made_date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)}}),mounted(){},computed:{formTitle(){return-1===this.editedIndex?"新增交易":"編輯交易"},formMadeDate(){return this.editedItem.made_date.slice(0,10)}},watch:{dialog(t){this.switch1=this.editedItem.pay,t||this.close()},dialogDelete(t){t||this.closeDelete()},dialogCashTime(t){t||this.closeCashTime()}},created(){this.$loading(!0),this.initialize(),this.$loading(!1)},methods:{chooseProduct(){this.editedItem.uintPrice=this.productArr[this.editedItem.name].price},checkInp(t){return!!isNaN(t)&&(this.error="should input number",!0)},printEnvelope(){let t=this.$router.resolve({name:"printEnvelope"});this.$store.dispatch("setPrintCustomer",this.customerInfo),window.open(t.href,"_blank")},printSomeReceipt(){this.calculatePriceAndWeight();let t=this.$router.resolve({name:"printOutwardsSomeTrade",query:{formerSum:this.formerSum,sum:this.sum,weight:this.weight}});this.$store.dispatch("setPrintData",this.trades),this.$store.dispatch("setPrintCustomer",this.customerInfo),window.open(t.href,"_blank")},printAllReceipt(){this.calculatePriceAndWeight();let t=this.$router.resolve({name:"printOutwardsAllTrade",query:{all:!1,formerSum:this.formerSum,sum:this.sum,weight:this.weight}});this.$store.dispatch("setPrintData",this.trades),this.$store.dispatch("setPrintCustomer",this.customerInfo),window.open(t.href,"_blank")},dateRangeText(){if(void 0==this.dates[1]&&(this.dates[1]=this.dates[0]),new Date(this.dates[0])>new Date(this.dates[1])){var t=this.dates[1];this.dates[1]=this.dates[0],this.dates[0]=t}this.dateText=this.dates[0]+"~"+this.dates[1]},changeDate(t){var e;"today"==t?(this.dates[0]=this.today,this.dates[1]=this.today):"week"==t?(e=new Date(this.dates[0]),e.setDate(e.getDate()-7),this.dates[0]=e.toISOString().substr(0,10)):"month"==t?(e=new Date(this.dates[0]),e.setMonth(e.getMonth()-1),this.dates[0]=e.toISOString().substr(0,10)):"year"==t&&(e=new Date(this.dates[0]),e.setFullYear(e.getFullYear()-1),this.dates[0]=e.toISOString().substr(0,10)),this.filterTrades()},filterTrades(){this.dateRangeText();var t=new Date(`${this.dates[0]}T00:00:00`),e=new Date(`${this.dates[1]}T24:00:00`);this.trades=this.allTrades.filter((function(a){var i=new Date(a.made_date);return i>=t&&i<=e})),this.trades.length},calculatePriceAndWeight(){this.formerSum=0;const t=this.allTrades.indexOf(this.trades[0])-1;t>-1&&(this.formerSum=this.allTrades[t].grandPrice),this.sum=0,this.weight=0,this.trades.forEach((t=>{this.sum+=t.aTradePrice,1!=t.pay&&("台斤"==t.uint?this.weight+=t.number*t.totalNumber*.6:"公斤"==t.uint&&(this.weight+=t.number*t.totalNumber))})),this.weight=this.weight.toFixed(2)},async initialize(){var t=(await jt.index()).data;if(this.customerNames=t.map((t=>t.name)),this.customerName=this.$store.state.route.params.customerName,"null"==this.customerName)return;t.forEach((t=>{t.name==this.customerName&&(this.customerInfo=t)}));const e=(await Xt.index()).data;this.productNames=[],this.productArr=[],e.forEach((t=>{this.productNames.push(t.full_name),this.productArr[t.full_name]=t})),this.transportNames=(await Wt.index()).data.map((t=>t.name));const a=(await he.index()).data;a.forEach((t=>{this.cashMethod.push(t.name),this.cashMethodArr[t.name]=t.ratio}));var i=new Date(this.today);i.setDate(i.getDate()-30),this.dates[0]=i.toISOString().substr(0,10),this.dates[1]=this.today,this.updateAllTradesByLastTen()},getChangeIdLeftTrades(){let t=this.allTrades.indexOf(this.allTrades.find((t=>t.id===this.changeItemId)));this.allTrades.length-t<10?this.trades=this.allTrades.slice(Math.max(this.allTrades.length-10,0)):this.trades=this.allTrades.slice(Math.max(t,0))},getLastTenTrades(){this.trades=this.allTrades.slice(Math.max(this.allTrades.length-10,0)),this.dates=[],this.dateText=""},async updateAllTrades(){this.allTrades=(await M.index(this.customerName)).data,this.getChangeIdLeftTrades()},async updateAllTradesByLastTen(){this.allTrades=(await M.index(this.customerName)).data,this.getLastTenTrades()},editItem(t){this.editedIndex=this.allTrades.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0,this.editedItem.aTradePrice<0&&(this.editedItem.aTradePrice=0-this.editedItem.aTradePrice)},deleteItem(t){this.editedIndex=this.allTrades.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},async deleteItemConfirm(){this.$loading(!0);try{var t=this.editedItem.aTradePrice;await M["delete"](this.editedItem),this.editedIndex++;while(this.editedIndex!=this.allTrades.length){var e=this.allTrades[this.editedIndex];e["grandPrice"]=e["grandPrice"]-t;try{await M.put(e),this.editedIndex++}catch(a){console.log(a)}}this.updateAllTradesByLastTen(),this.closeDelete()}catch(a){console.log(a)}this.$loading(!1)},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})),this.error=""},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},closeCashTime(){this.dialogCashTime=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},async save(){this.$loading(!0);var t=this.editedItem;if(this.editedIndex>-1){if(!t.pay&&(this.checkInp(t.amount)||this.checkInp(t.package))||t.pay&&this.checkInp(t.aTradePrice))return void this.$loading(!1)}else if(!this.switch1&&(this.checkInp(t.amount)||this.checkInp(t.package))||this.switch1&&this.checkInp(t.aTradePrice))return void this.$loading(!1);var e=this.allTrades.length;t["customer_name"]=this.customerName,t["user_name"]=this.$store.state.user.account;var a=0;if(this.switch1?(t["pay"]=!0,t["number"]=null,t["uint"]=null,t["package"]=null,t["amount"]=null,t["totalNumber"]=null,t["sellUint"]=null,t["uintPrice"]=null,t["transport"]=null,t["aTradePrice"]=-t.aTradePrice*this.cashMethodArr[t.name],t["aTradePrice"]=-t.aTradePrice):(t["pay"]=!1,t["number"]=this.productArr[t.name].number,t["uint"]=this.productArr[t.name].uint,t["totalNumber"]=t.amount*t.package,t["sellUint"]=this.productArr[t.name].sellUint,t["aTradePrice"]=Math.round(t.totalNumber*t.uintPrice)),this.editedIndex>-1){this.changeItemId=t.id,0!=this.editedIndex&&(a=this.allTrades[this.editedIndex-1].grandPrice);while(1){a+=t.aTradePrice,t["grandPrice"]=a;try{if(await M.put(t),this.editedIndex++,this.editedIndex==e)break;t=this.allTrades[this.editedIndex]}catch(r){console.log(r)}}this.updateAllTrades()}else{t.made_date=`${t.made_date} 23:59:59`;var i=e-1;while(i>=0){if(!(this.allTrades[i].made_date>t.made_date))break;i--}a=-1==i?0:this.allTrades[i].grandPrice,t["grandPrice"]=a+t.aTradePrice;try{var s=(await M.post(t)).data;this.changeItemId=s.id}catch(r){console.log(r)}i++;while(i<e){var n=this.allTrades[i];n.grandPrice+=t.aTradePrice;try{await M.put(n)}catch(r){console.log(r)}i++}this.updateAllTrades()}this.close(),this.$loading(!1)}}},xe=pe,fe=(0,c.Z)(xe,ce,me,!1,null,"11c0fdb9",null),ve=fe.exports,ge=function(){var t=this,e=t._self._c;return e("titlepanel",{attrs:{title:"出 貨 "}},[e(Tt.Z,[e(Ct.EB,[t._v(" 販賣單位資料 "),e(y.Z),e(Z.Z,{attrs:{"append-icon":"mdi-magnify",label:"搜尋販賣單位","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(St.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.sellUints,"items-per-page":10,"item-key":"name",search:t.search,"custom-filter":t.filterOnlyCapsText},scopedSlots:t._u([{key:"footer",fn:function(){return[e(Pt.Z,{attrs:{flat:""}},[e(y.Z),e(Dt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(p.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),a),[t._v(" 新增販賣單位 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Tt.Z,[e(Ct.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(Ct.ZB,[e(f.Z,[e(b.Z,[e(Z.Z,{attrs:{label:"販賣單位",rules:[t.required]},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1)],1)],1),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(p.Z,{attrs:{color:"blue darken-1",text:"",disabled:""==t.editedItem.name},on:{click:t.save}},[t._v(" 儲存 ")])],1)],1)],1),e(Dt.Z,{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(Tt.Z,[e(Ct.EB,{staticClass:"text-h5"},[t._v("你確定要刪掉這個客戶嗎？")]),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("確認")]),e(y.Z)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[e("p",{staticClass:"ma-3"},[t._v("你還沒新增資料")]),e("p",{staticClass:"ma-3"},[t._v("如果你新增了，可以按下面的按鈕重整")]),e(p.Z,{staticClass:"mb-3",attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" 重整 ")])]},proxy:!0}])})],1)],1)},_e=[],Ie={components:{Titlepanel:yt},data:()=>({search:"",required:t=>!!t||"Required.",dialog:!1,dialogDelete:!1,headers:[{text:"販賣單位",align:"start",sortable:!1,value:"name"},{text:"功能",value:"actions",sortable:!1}],sellUints:[],editedIndex:-1,editedItem:{name:""},defaultItem:{name:""}}),computed:{formTitle(){return-1===this.editedIndex?"新增販賣單位":"編輯販賣單位"}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},created(){this.$loading(!0),this.initialize(),this.$loading(!1)},methods:{filterOnlyCapsText(t,e,a){return null!=t&&null!=e&&"string"===typeof t&&-1!==t.toString().indexOf(e)},navigateTo(t){this.$router.push(t)},async initialize(){this.sellUints=(await ee.index()).data},editItem(t){this.editedIndex=this.sellUints.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.sellUints.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},async deleteItemConfirm(){this.$loading(!0);try{await ee["delete"](this.editedItem),this.closeDelete()}catch(t){console.log(t)}this.initialize(),this.$loading(!1)},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},async save(){if(this.$loading(!0),this.editedIndex>-1)try{await ee.put(this.editedItem),Object.assign(this.sellUints[this.editedIndex],this.editedItem)}catch(t){console.log(t)}else try{await ee.post(this.editedItem),this.initialize()}catch(t){console.log(t)}this.close(),this.$loading(!1)}}},be=Ie,ye=(0,c.Z)(be,ge,_e,!1,null,null,null),Ze=ye.exports,ke=function(){var t=this,e=t._self._c;return e("titlepanel",{attrs:{title:"出 貨 "}},[e("div",{staticClass:"white"},[e("div",{staticClass:"subTitle"},[e("b",[t._v("篩選條件")])]),e(b.Z,[e(x.Z,{attrs:{cols:"12",md:"3"}},[e(I.Z,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.dates,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.dates=e},"update:return-value":function(e){t.dates=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Z.Z,t._g(t._b({attrs:{label:"篩選日期","prepend-icon":"mdi-calendar",readonly:"",dense:"",outlined:"",flat:"",solo:""},model:{value:t.dateText,callback:function(e){t.dateText=e},expression:"dateText"}},"v-text-field",i,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(v.Z,{attrs:{"no-title":"",range:""},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}},[e(y.Z),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v(" Cancel ")]),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.menu.save(t.dates),t.dateRangeText()}}},[t._v(" OK ")])],1)],1)],1),e(x.Z,{staticClass:"d-flex flex-row",attrs:{cols:"12",md:"4"}},[e(p.Z,{on:{click:function(e){return t.changeDate("today")}}},[t._v("今日")]),e(p.Z,{on:{click:function(e){return t.changeDate("week")}}},[t._v("前七日")]),e(p.Z,{on:{click:function(e){return t.changeDate("month")}}},[t._v("前一個月")]),e(p.Z,{on:{click:function(e){return t.changeDate("year")}}},[t._v("前一年")])],1)],1)],1),e(Tt.Z,[e(Ct.EB,[t._v(" 入帳資料 "),e(y.Z),e(Z.Z,{attrs:{"append-icon":"mdi-magnify",label:"搜尋入帳","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(St.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.cashMethods,"items-per-page":10,"item-key":"name",search:t.search,"custom-filter":t.filterOnlyCapsText},scopedSlots:t._u([{key:"footer",fn:function(){return[e(Pt.Z,{attrs:{flat:""}},[e(y.Z),e(Dt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(p.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),a),[t._v(" 新增入帳選項 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Tt.Z,[e(Ct.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(Ct.ZB,[e(f.Z,[e(b.Z,[e(Z.Z,{attrs:{label:"名稱",rules:[t.required]},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(b.Z,[e(Yt.Z,{attrs:{label:"匯出或匯入",items:t.actionNames,rules:[t.required]},model:{value:t.editedItem.ratioName,callback:function(e){t.$set(t.editedItem,"ratioName",e)},expression:"editedItem.ratioName"}})],1)],1)],1),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(p.Z,{attrs:{color:"blue darken-1",text:"",disabled:""==t.editedItem.name},on:{click:t.save}},[t._v(" 儲存 ")])],1)],1)],1),e(Dt.Z,{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(Tt.Z,[e(Ct.EB,{staticClass:"text-h5"},[t._v("你確定要刪掉這個客戶嗎？")]),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("確認")]),e(y.Z)],1)],1)],1),e(Dt.Z,{attrs:{"max-width":"1200px"},model:{value:t.dialogSearch,callback:function(e){t.dialogSearch=e},expression:"dialogSearch"}},[e(Tt.Z,[e(Ct.EB,{staticClass:"text-h5"},[t._v(t._s(t.editedItem.name))]),e(Ct.ZB,[e(St.Z,{staticClass:"elevation-1",attrs:{headers:t.tradeHeaders,items:t.trades,"item-key":"id"},scopedSlots:t._u([t._l(t.tradeHeaders.filter((t=>t.hasOwnProperty("formatter"))),(function(a){return{key:`item.${a.value}`,fn:function({header:a,value:i}){return["grandPrice"==a.value&&i>0?e("div",{staticClass:"blue-text"},[t._v(" "+t._s(a.formatter(i))+" ")]):"grandPrice"==a.value&&i<0?e("div",{staticClass:"red-text"},[t._v(" "+t._s(a.formatter(i))+" ")]):"grandPrice"==a.value&&0==i?e("div",{staticClass:"zero"},[t._v(" "+t._s(a.formatter(i))+" ")]):e("div",[t._v(" "+t._s(a.formatter(i))+" ")])]}}}))],null,!0)})],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")]),e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.searchItem(a)}}},[t._v(" mdi-card-search ")])]}},{key:"no-data",fn:function(){return[e("p",{staticClass:"ma-3"},[t._v("你還沒新增資料")]),e("p",{staticClass:"ma-3"},[t._v("如果你新增了，可以按下面的按鈕重整")]),e(p.Z,{staticClass:"mb-3",attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" 重整 ")])]},proxy:!0}])})],1)],1)},we=[],$e={components:{Titlepanel:yt},data:()=>({today:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),dates:[],dateText:"",menu:!1,trades:[],tradeHeaders:[{text:"日期",value:"made_date",sortable:!1,width:"105px",formatter:t=>t.slice(0,10)},{text:"顧客",align:"start",sortable:!1,value:"customer_name"},{text:"小計",value:"aTradePrice",sortable:!1,formatter:t=>null!=t?(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,","):"-"},{text:"累計",value:"grandPrice",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"備註",value:"comment",sortable:!1}],actionNames:["匯入","匯出"],search:"",required:t=>!!t||"Required.",dialog:!1,dialogDelete:!1,dialogSearch:!1,headers:[{text:"入帳選項",align:"start",sortable:!1,value:"name"},{text:"比率",align:"start",sortable:!1,value:"ratio"},{text:"功能",value:"actions",sortable:!1}],cashMethods:[],editedIndex:-1,editedItem:{name:"",ratioName:"匯入"},defaultItem:{name:"",ratioName:"匯入"}}),computed:{formTitle(){return-1===this.editedIndex?"新增入帳選項":"編輯入帳選項"}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()},dialogSearch(t){t||this.closeSearch()}},created(){this.$loading(!0),this.initialize(),this.$loading(!1)},methods:{changeDate(t){var e;"today"==t?(this.dates[0]=this.today,this.dates[1]=this.today):"week"==t?(e=new Date(this.dates[0]),e.setDate(e.getDate()-7),this.dates[0]=e.toISOString().substr(0,10)):"month"==t?(e=new Date(this.dates[0]),e.setMonth(e.getMonth()-1),this.dates[0]=e.toISOString().substr(0,10)):"year"==t&&(e=new Date(this.dates[0]),e.setFullYear(e.getFullYear()-1),this.dates[0]=e.toISOString().substr(0,10)),this.dateRangeText()},dateRangeText(){if(void 0==this.dates[1]&&(this.dates[1]=this.dates[0]),new Date(this.dates[0])>new Date(this.dates[1])){var t=this.dates[1];this.dates[1]=this.dates[0],this.dates[0]=t}this.dateText=this.dates[0]+"~"+this.dates[1]},filterOnlyCapsText(t,e,a){return null!=t&&null!=e&&"string"===typeof t&&-1!==t.toString().indexOf(e)},async initialize(){this.cashMethods=(await he.index()).data;var t=new Date(this.today);t.setDate(t.getDate()-30),this.dates[0]=t.toISOString().substr(0,10),this.dates[1]=this.today,this.dateRangeText()},editItem(t){this.editedIndex=this.cashMethods.indexOf(t),this.editedItem=Object.assign({},t),-1==this.editedItem.ratio&&(this.editedItem.ratioName="匯入"),1==this.editedItem.ratio&&(this.editedItem.ratioName="匯出"),this.dialog=!0},deleteItem(t){this.editedIndex=this.cashMethods.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},async searchItem(t){this.trades=(await M.indexByCashmethodAndDates(t.name,this.dates)).data,this.editedItem=Object.assign({},t),this.dialogSearch=!0},async deleteItemConfirm(){this.$loading(!0);try{await he["delete"](this.editedItem),this.closeDelete()}catch(t){console.log(t)}this.initialize(),this.$loading(!1)},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},closeSearch(){this.dialogSearch=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},async save(){this.$loading(!0);var t=this.editedItem;if("匯出"==t.ratioName?t.ratio=1:t.ratio=-1,this.editedIndex>-1)try{await he.put(this.editedItem),Object.assign(this.cashMethods[this.editedIndex],this.editedItem)}catch(e){console.log(e)}else try{await he.post(this.editedItem),this.initialize()}catch(e){console.log(e)}this.close(),this.$loading(!1)}}},Te=$e,Ce=(0,c.Z)(Te,ke,we,!1,null,null,null),Se=Ce.exports,De=function(){var t=this,e=t._self._c;return e("titlepanel",{attrs:{title:"進 貨 "}},[e(_.Z,{staticClass:"ml-4 mr-4"},[e(g.Z,{attrs:{xs12:"","offset-xs0":""}},[e(b.Z,[e(x.Z,{attrs:{cols:"12",md:"4"}},[e(p.Z,{staticClass:"d-flex align-center",attrs:{color:"primary",dark:"",height:"200",to:{name:"inwardsCustomer"}}},[e("h3",[t._v("顧客")])])],1),e(x.Z,{attrs:{cols:"12",md:"4"}},[e(p.Z,{staticClass:"d-flex align-center",attrs:{color:"primary",dark:"",height:"200",to:{name:"inwardsRicekind"}}},[e("h3",[t._v("米的種類")])])],1),e(x.Z,{attrs:{cols:"12",md:"4"}},[e(p.Z,{staticClass:"d-flex align-center",attrs:{color:"primary",dark:"",height:"200",to:{name:"inwardsProduct"}}},[e("h3",[t._v("產品")])])],1)],1),e("br"),e(b.Z,[e(x.Z,{attrs:{cols:"12",md:"12"}},[e(p.Z,{staticClass:"d-flex align-center",attrs:{color:"primary",dark:"",height:"200",to:{name:"inwardsTrade",params:{customerName:"null"}}}},[e("h3",[t._v("交易")])])],1)],1)],1)],1)],1)},Oe=[],Pe={components:{Titlepanel:yt},data(){return{}},methods:{navigateTo(t){this.$router.push(t)}}},Ne=Pe,Be=(0,c.Z)(Ne,De,Oe,!1,null,"c8d9a0ba",null),ze=Be.exports,je=function(){var t=this,e=t._self._c;return e("titlepanel",{attrs:{title:"進 貨 "}},[e("div",{staticClass:"white"},[e("div",{staticClass:"subTitle"},[e("b",[t._v("交易日期篩選條件")])]),e(b.Z,[e(x.Z,{attrs:{cols:"12",md:"3"}},[e(I.Z,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Z.Z,t._g(t._b({attrs:{label:"篩選日期","prepend-icon":"mdi-calendar",readonly:"",dense:"",outlined:"",flat:"",solo:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"v-text-field",i,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(v.Z,{attrs:{"no-title":"",scrollable:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[e(y.Z),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v(" Cancel ")]),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.date)}}},[t._v(" OK ")])],1)],1)],1),e(x.Z,{staticClass:"d-flex pt-3",attrs:{cols:"12",md:"3"}},[e(p.Z,{attrs:{disabled:null==t.date},on:{click:t.serchDateCustomer}},[t._v(" 搜尋 ")]),e(p.Z,{staticClass:"ml-2"},[e(Ot.Z,{attrs:{small:""},on:{click:t.initialize}},[t._v(" mdi-refresh ")])],1)],1)],1)],1),e(Tt.Z,[e(Ct.EB,[t._v(" 顧客資料 "),e(y.Z),e(Z.Z,{attrs:{"append-icon":"mdi-magnify",label:"搜尋顧客","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(St.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.customers,"items-per-page":10,"item-key":"name",search:t.search,"custom-filter":t.filterOnlyCapsText},scopedSlots:t._u([{key:"footer",fn:function(){return[e(Pt.Z,{attrs:{flat:""}},[e(y.Z),e(Dt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(p.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),a),[t._v(" 新增顧客 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Tt.Z,[e(Ct.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(Ct.ZB,[e(f.Z,[e(b.Z,[-1==t.editedIndex?e(Z.Z,{attrs:{label:"顧客姓名",rules:[t.required]},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}}):e(Z.Z,{attrs:{label:"顧客姓名（無法修改）",readonly:"",rules:[t.required]},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"地址"},model:{value:t.editedItem.address,callback:function(e){t.$set(t.editedItem,"address",e)},expression:"editedItem.address"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"住家電話"},model:{value:t.editedItem.homePhone,callback:function(e){t.$set(t.editedItem,"homePhone",e)},expression:"editedItem.homePhone"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"手機電話"},model:{value:t.editedItem.phone,callback:function(e){t.$set(t.editedItem,"phone",e)},expression:"editedItem.phone"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"聯絡人"},model:{value:t.editedItem.contact,callback:function(e){t.$set(t.editedItem,"contact",e)},expression:"editedItem.contact"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"統編/身分證號碼"},model:{value:t.editedItem.taxId,callback:function(e){t.$set(t.editedItem,"taxId",e)},expression:"editedItem.taxId"}})],1)],1),t.error?e(f.Z,{staticClass:"danger-alert"},[t._v(" "+t._s(t.error)+" ")]):t._e()],1),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(p.Z,{attrs:{color:"blue darken-1",text:"",disabled:""==t.editedItem.name},on:{click:t.save}},[t._v(" 儲存 ")])],1)],1)],1),e(Dt.Z,{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(Tt.Z,[e(Ct.EB,{staticClass:"text-h5"},[t._v("你確定要刪掉這個客戶嗎？")]),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("確認")]),e(y.Z)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")]),e(Ot.Z,{attrs:{small:""},on:{click:function(e){return t.navigateTo({name:"inwardsTrade",params:{customerName:a.name}})}}},[t._v(" mdi-eye ")])]}},{key:"no-data",fn:function(){return[e("p",{staticClass:"ma-3"},[t._v("There is no data")])]},proxy:!0}])})],1)],1)},qe=[];const Ee="api/inwards/customers/";var Re={index(){return R().get(`${Ee}allCustomers`)},get(t){return R().get(`${Ee}${t}`)},post(t){return R().post(`${Ee}addCustomer`,t)},put(t){return R().put(`${Ee}${t.id}`,t)},delete(t){return R().delete(`${Ee}${t.id}`)}},Le={components:{Titlepanel:yt},data:()=>({search:"",date:"",menu:!1,error:"",required:t=>!!t||"Required.",dialog:!1,dialogDelete:!1,headers:[{text:"顧客",align:"start",sortable:!1,value:"name"},{text:"地址",value:"address",sortable:!1},{text:"住家電話",value:"homePhone",sortable:!1,width:"120px"},{text:"手機電話",value:"phone",sortable:!1,width:"120px"},{text:"聯絡人",value:"contact",sortable:!1},{text:"統編/身分證號碼",value:"taxId",sortable:!1,width:"130px"},{text:"功能",value:"actions",sortable:!1}],customers:[],editedIndex:-1,editedItem:{name:"",address:"",phone:"",homePhone:"",contact:"",taxId:""},defaultItem:{name:"",address:"",phone:"",homePhone:"",contact:"",taxId:""}}),computed:{formTitle(){return-1===this.editedIndex?"新增顧客":"編輯顧客"}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},created(){this.$loading(!0),this.initialize(),this.$loading(!1)},methods:{filterOnlyCapsText(t,e,a){return null!=t&&null!=e&&"string"===typeof t&&-1!==t.toString().indexOf(e)},async serchDateCustomer(){this.$loading(!0);var t=(await U.indexByDates([this.date,this.date])).data,e=new Set;t.forEach((t=>{e.add(t.customer_name)})),t=(await V.indexByDates([this.date,this.date])).data,t.forEach((t=>{e.add(t.customer_name)})),this.customers=[];for(const i of e.values()){var a=(await Re.get(i)).data[0];this.customers.push(a)}this.customers.sort(((t,e)=>t.name.localeCompare(e.name,"zh-Hant"))),this.$loading(!1)},navigateTo(t){this.$router.push(t)},async initialize(){this.customers=(await Re.index()).data},editItem(t){this.editedIndex=this.customers.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.customers.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},async deleteItemConfirm(){this.$loading(!0);try{await Re["delete"](this.editedItem),this.closeDelete()}catch(t){console.log(t)}this.initialize(),this.$loading(!1)},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})),this.error=""},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},async save(){if(this.$loading(!0),this.editedIndex>-1)try{await Re.put(this.editedItem),Object.assign(this.customers[this.editedIndex],this.editedItem)}catch(t){console.log(t)}else{const e=t=>t.name==this.editedItem.name;if(this.customers.some(e))return this.error="你有相同的顧客名字",void this.$loading(!1);try{await Re.post(this.editedItem),this.initialize()}catch(t){console.log(t)}}this.close(),this.$loading(!1)}}},Me=Le,Ae=(0,c.Z)(Me,je,qe,!1,null,null,null),Ue=Ae.exports,We=a(7423),Ve=function(){var t=this,e=t._self._c;return e("titlepanel",{attrs:{title:"進 貨 "}},[e("div",{staticClass:"white"},[e("div",{staticClass:"subTitle"},[e("b",[t._v("篩選條件")])]),e(b.Z,[e(x.Z,{staticClass:"d-flex",attrs:{cols:"12",md:"4"}},[e(re.Z,{attrs:{"hide-details":"",items:t.customerNames,label:"顧客選項",dense:"",outlined:"",flat:"",solo:""},model:{value:t.searchCustomer,callback:function(e){t.searchCustomer=e},expression:"searchCustomer"}}),e(p.Z,{staticClass:"ml-1",attrs:{depressed:"",disabled:"null"==t.searchCustomer,to:{name:"inwardsTrade",params:{customerName:t.searchCustomer}}},on:{click:function(e){return t.$router.go()}}},[t._v(" 搜尋 ")])],1),e(x.Z,{staticClass:"d-flex flex-row",attrs:{cols:"12",md:"6"}},[e(I.Z,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.dates,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.dates=e},"update:return-value":function(e){t.dates=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Z.Z,t._g(t._b({attrs:{label:"篩選日期","prepend-icon":"mdi-calendar",readonly:"",dense:"",outlined:"",flat:"",solo:""},model:{value:t.dateText,callback:function(e){t.dateText=e},expression:"dateText"}},"v-text-field",i,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(v.Z,{attrs:{"no-title":"",range:""},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}},[e(y.Z),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v(" Cancel ")]),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.menu.save(t.dates),t.filterTrades()}}},[t._v(" OK ")])],1)],1),e("div",{staticClass:"ml-1"},[e(p.Z,{on:{click:function(e){return t.changeDate("today")}}},[t._v("今日")]),e(p.Z,{on:{click:function(e){return t.changeDate("week")}}},[t._v("前七日")]),e(p.Z,{on:{click:function(e){return t.changeDate("month")}}},[t._v("前一個月")]),e(p.Z,{on:{click:function(e){return t.changeDate("year")}}},[t._v("前一年")])],1)],1),e(x.Z,{attrs:{cols:"12",md:"2"}},[e(We.Z,{staticClass:"mx-auto transition-swing rounded-lg py-1",attrs:{elevation:"3",width:"100%"}},[e("h4",[t._v("客戶往來最後交易金額")]),t.lastOtherTrade.grandPrice<0?e("h4",{staticClass:"blue-text"},[t._v(" "+t._s(t.lastOtherTradeGrandPrice)+" ")]):e("h4",{staticClass:"red-text"},[t._v(" "+t._s(t.lastOtherTradeGrandPrice)+" ")])])],1)],1)],1),"null"==t.customerName?e("div",[t._v(" 請選擇上面的顧客選項 ")]):e("div",[e("Trade",{ref:"riceTrade",attrs:{dates:t.dates}}),e("OtherTrade",{ref:"otherTrade",attrs:{dates:t.dates}})],1)])},Fe=[],He=function(){var t=this,e=t._self._c;return e(St.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.trades,"items-per-page":10},scopedSlots:t._u([{key:"footer",fn:function(){return[e(Pt.Z,{attrs:{flat:""}},[e("div",[e(oe.qW,[t._v(t._s(t.customerName)+" 糧食交易資料")]),e("p",[t._v(t._s(t.customerInfo.homePhone)+" | "+t._s(t.customerInfo.phone))])],1),e(de.Z,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e(y.Z),e(Dt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e("download-excel",{staticClass:"btn",attrs:{header:`交 易 紀 錄\n年昌碾米工廠 地址: 玉里中華路28號\n電話: 03-8883066 03-8882066 傳真: 03-8881066\n 廠商編號：${t.customerInfo.taxId} 廠商姓名： ${t.customerInfo.name}\n 廠商地址： ${t.customerInfo.address}\n 廠商手機： ${t.customerInfo.homePhone} 廠商手機： ${t.customerInfo.phone}`,data:t.trades,fields:t.json_fields,worksheet:"糧食進出交易",name:t.customerName+"糧食進出交易.xls"}},[t._v(" 下載Excel ")]),e(p.Z,{staticClass:"mb-2 mr-2",on:{click:t.printEnvelope}},[t._v(" 列印信封 ")]),e(p.Z,{staticClass:"mb-2 mr-2",on:{click:t.printReceipt}},[t._v(" 列印糧食進出登記簿 ")]),e(p.Z,t._g(t._b({staticClass:"mb-2 mr-2",attrs:{color:"primary"}},"v-btn",i,!1),a),[t._v(" 新增糧食進出交易 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Tt.Z,{staticClass:"change-position"},[e(Ct.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))]),e(y.Z),-1==t.editedIndex?e(le.Z,{attrs:{inset:"",label:""+(!0===t.switch1?"轉出模式":"正常模式")},on:{change:function(e){t.editedItem=Object.assign({},t.defaultItem)}},model:{value:t.switch1,callback:function(e){t.switch1=e},expression:"switch1"}}):t._e()],1),e(Ct.ZB,[-1==t.editedIndex?e(f.Z,[e(b.Z,[e(I.Z,{ref:"menu_made_date",attrs:{"close-on-content-click":!1,"return-value":t.editedItem.made_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){return t.$set(t.editedItem,"made_date",e)},"update:return-value":function(e){return t.$set(t.editedItem,"made_date",e)}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Z.Z,t._g(t._b({attrs:{label:"交易日期","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.editedItem.made_date,callback:function(e){t.$set(t.editedItem,"made_date",e)},expression:"editedItem.made_date"}},"v-text-field",i,!1),a))]}}],null,!1,545477903),model:{value:t.menu_made_date,callback:function(e){t.menu_made_date=e},expression:"menu_made_date"}},[e(v.Z,{attrs:{"no-title":"",scrollable:""},model:{value:t.editedItem.made_date,callback:function(e){t.$set(t.editedItem,"made_date",e)},expression:"editedItem.made_date"}},[e(y.Z),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu_made_date=!1}}},[t._v(" Cancel ")]),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu_made_date.save(t.editedItem.made_date)}}},[t._v(" OK ")])],1)],1)],1),e(b.Z,[e(re.Z,{attrs:{items:t.ricekindNames,label:"米項目選項",rules:[t.required]},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(b.Z,[!1===t.switch1?e(Z.Z,{staticClass:"pr-4",attrs:{label:"進"},model:{value:t.editedItem.in,callback:function(e){t.$set(t.editedItem,"in",e)},expression:"editedItem.in"}}):t._e(),e(Z.Z,{staticClass:"pr-4",attrs:{label:"出"},model:{value:t.editedItem.out,callback:function(e){t.$set(t.editedItem,"out",e)},expression:"editedItem.out"}})],1),e(b.Z,[e(Yt.Z,{attrs:{items:t.ricekindUints,label:"單位"},model:{value:t.editedItem.uint,callback:function(e){t.$set(t.editedItem,"uint",e)},expression:"editedItem.uint"}})],1),!0===t.switch1?e(b.Z,[e(re.Z,{attrs:{items:t.inCustomerNames,label:"轉入客戶選項"},model:{value:t.editedItem.inCustomer,callback:function(e){t.$set(t.editedItem,"inCustomer",e)},expression:"editedItem.inCustomer"}})],1):t._e(),e(b.Z,[e(Z.Z,{attrs:{label:"備註"},model:{value:t.editedItem.comment,callback:function(e){t.$set(t.editedItem,"comment",e)},expression:"editedItem.comment"}})],1)],1):e(f.Z,[e(b.Z,[-1!=t.editedIndex?e(Z.Z,{attrs:{label:"交易日期（無法修改）",readonly:""},model:{value:t.formMadeDate,callback:function(e){t.formMadeDate=e},expression:"formMadeDate"}}):t._e()],1),e(b.Z,[e(re.Z,{attrs:{items:t.ricekindNames,label:"米項目選項",rules:[t.required]},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(b.Z,[0!==t.editedItem.in?e(Z.Z,{staticClass:"pr-4",attrs:{label:"進"},model:{value:t.editedItem.in,callback:function(e){t.$set(t.editedItem,"in",e)},expression:"editedItem.in"}}):t._e(),0!==t.editedItem.out?e(Z.Z,{staticClass:"pr-4",attrs:{label:"出"},model:{value:t.editedItem.out,callback:function(e){t.$set(t.editedItem,"out",e)},expression:"editedItem.out"}}):t._e()],1),e(b.Z,[e(Yt.Z,{attrs:{items:t.ricekindUints,label:"單位"},model:{value:t.editedItem.uint,callback:function(e){t.$set(t.editedItem,"uint",e)},expression:"editedItem.uint"}})],1),-1!=t.editedItem.turn_id?e(b.Z,[e(Z.Z,{attrs:{label:"稻穀紀錄（若要修改客戶選項，請刪除在做新增）",readonly:""},model:{value:t.editedItem.go,callback:function(e){t.$set(t.editedItem,"go",e)},expression:"editedItem.go"}})],1):t._e(),e(b.Z,[e(Z.Z,{attrs:{label:"備註"},model:{value:t.editedItem.comment,callback:function(e){t.$set(t.editedItem,"comment",e)},expression:"editedItem.comment"}})],1)],1),t.error?e(f.Z,{staticClass:"danger-alert"},[t._v(" "+t._s(t.error)+" ")]):t._e()],1),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),-1==t.editedIndex?e(p.Z,{attrs:{color:"blue darken-1",text:"",disabled:""==t.editedItem.made_date||""==t.editedItem.name||""==t.editedItem.uint||""==t.editedItem.in&&""==t.editedItem.out||""!=t.editedItem.in&&""!=t.editedItem.out||""!=t.editedItem.in&&""!=t.editedItem.inCustomer},on:{click:t.save}},[t._v(" 儲存 ")]):e(p.Z,{attrs:{color:"blue darken-1",text:"",disabled:""==t.editedItem.made_date||""==t.editedItem.name||""==t.editedItem.uint||""==t.editedItem.in&&""==t.editedItem.out||""!=t.editedItem.in&&""!=t.editedItem.out},on:{click:t.save}},[t._v(" 儲存 ")])],1)],1)],1),e(Dt.Z,{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(Tt.Z,[e(Ct.EB,{staticClass:"text-h5"},[t._v("你確定要刪掉這個糧食進出交易嗎？")]),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("確認")]),e(y.Z)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[e("p",{staticClass:"ma-3"},[t._v("你還沒新增資料")]),e("p",{staticClass:"ma-3"},[t._v("如果你新增了，可以按下面的按鈕重整")]),e(p.Z,{staticClass:"mb-3",attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" 重整 ")])]},proxy:!0},t._l(t.headers.filter((t=>t.hasOwnProperty("formatter"))),(function(a){return{key:`item.${a.value}`,fn:function({header:a,value:i}){return["stock"==a.value?e("div",[e("div",i>=0?{staticClass:"blue-text"}:{staticClass:"red-text"},[t._v(" "+t._s(a.formatter(i))+" ")])]):e("div",[t._v(" "+t._s(a.formatter(i))+" ")])]}}}))],null,!0)})},Ke=[];const Ye="api/inwards/ricekinds/";var Ge={index(){return R().get(`${Ye}allItems`)},post(t){return R().post(`${Ye}addItem`,t)},put(t){return R().put(`${Ye}${t.id}`,t)},delete(t){return R().delete(`${Ye}${t.id}`)}},Je={props:["dates"],data:()=>({json_fields:{"日期":{callback:t=>t.made_date.slice(0,10)},"品名":"name","進":"in","出":"out","小計":"stock","稻穀紀錄":"go","備註":"comment"},json_meta:[[{key:"charset",value:"utf-8"}]],today:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),customerName:"",customerNames:[],customerInfo:{},error:"",switch1:!1,menu:!1,menu_made_date:!1,ricekindNames:[],ricekinds:[],ricekindUints:["公斤","台斤"],inCustomerNames:[],required:t=>0!==t.toString().length||"Required.",dialog:!1,dialogDelete:!1,currentTime:"",headers:[{text:"日期",value:"made_date",sortable:!1,width:"105px",formatter:t=>t.slice(0,10)},{text:"產品",align:"start",sortable:!1,value:"name"},{text:"進",value:"in",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"出",value:"out",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"小計",value:"stock",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"稻穀紀錄",value:"go",sortable:!1},{text:"備註",value:"comment",sortable:!1},{text:"功能",value:"actions",sortable:!1,width:"10%"}],changeItemId:null,trades:[],allTrades:[],editedIndex:-1,editedItem:{name:"",in:"",out:"",uint:"公斤",inCustomer:"",comment:"",made_date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)},defaultItem:{name:"",in:"",out:"",uint:"公斤",inCustomer:"",comment:"",made_date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)}}),mounted(){},computed:{formTitle(){return-1===this.editedIndex?"新增糧食進出交易":"編輯糧食進出交易"},formMadeDate(){return this.editedItem.made_date.slice(0,10)}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},created(){},methods:{printEnvelope(){let t=this.$router.resolve({name:"printEnvelope"});this.$store.dispatch("setPrintCustomer",this.customerInfo),window.open(t.href,"_blank")},printReceipt(){let t=this.$router.resolve({name:"printInwardsTrade",query:{all:!1}});this.$store.dispatch("setPrintData",this.trades),this.$store.dispatch("setPrintCustomer",this.customerInfo),window.open(t.href,"_blank")},checkInp(t){return!!isNaN(t)&&(this.error="請輸入正確格式",!0)},filterTrades(){var t=new Date(`${this.dates[0]}T00:00:00`),e=new Date(`${this.dates[1]}T24:00:00`);this.trades=this.allTrades.filter((function(a){var i=new Date(a.made_date);return i>=t&&i<=e}))},async initialize(){this.inCustomerNames=this.customerNames.filter((t=>t!==this.customerName)),this.updateRicekinds(),this.updateAllTradesByLastTen()},getLastTenTrades(){this.trades=this.allTrades.slice(Math.max(this.allTrades.length-10,0))},getChangeIdLeftTrades(){let t=this.allTrades.indexOf(this.allTrades.find((t=>t.id===this.changeItemId)));this.allTrades.length-t<10?this.trades=this.allTrades.slice(Math.max(this.allTrades.length-10,0)):this.trades=this.allTrades.slice(Math.max(t,0))},async updateAllTrades(){this.allTrades=(await V.index(this.customerName)).data,this.getChangeIdLeftTrades()},async updateAllTradesByLastTen(){this.allTrades=(await V.index(this.customerName)).data,this.getLastTenTrades()},async updateRicekinds(){var t=(await Ge.index()).data;t.forEach((t=>{this.ricekindNames.push(t.name),this.ricekinds[t.name]=t}))},editItem(t){this.editedIndex=this.allTrades.indexOf(t),this.editedItem=Object.assign({},t),this.editedItem.uint="公斤",this.dialog=!0},deleteItem(t){this.editedIndex=this.allTrades.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},async deleteItemConfirm(){this.$loading(!0);var t=this.editedItem,e=this.allTrades.length,a=parseInt(t.in)-parseInt(t.out),i=this.editedIndex;i++;while(i<e){var s=this.allTrades[i];s["stock"]=s.stock-a;try{await V.put(s),i++}catch(l){console.log(l)}}if(null!=t.another_customer_name){var n=(await V.index(t.another_customer_name)).data,r=n.length,d=n.findIndex((e=>e.turn_id==t.id));d++;while(d!=r){s=n[d];s["stock"]=s.stock+a;try{await V.put(s),d++}catch(l){console.log(l)}}}try{await V["delete"](t),await V.deleteById(t.turn_id)}catch(l){console.log(l)}this.updateAllTradesByLastTen(),this.closeDelete(),this.$loading(!1)},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})),this.error=""},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},async save(){this.$loading(!0);var t=this.editedItem;if(this.checkInp(t.in))this.$loading(!1);else if(this.checkInp(t.out))this.$loading(!1);else{"台斤"==t.uint&&(t.in=.6*t.in,t.out=.6*t.out),t.customer_name=this.customerName,t.user_name=this.$store.state.user.account,""==t.in||0==t.in?t.in=0:t.out=0;var e=this.allTrades.length,a=0,i=parseInt(t.in)-parseInt(t.out);if(this.editedIndex>-1){var s=this.editedIndex,n=i-this.allTrades[s].in+this.allTrades[s].out;t.stock=t.stock+n;try{await V.put(t),this.changeItemId=t.id}catch(v){console.log(v)}s++;while(s<e){var r=this.allTrades[s];r["stock"]=r.stock+n;try{await V.put(r)}catch(v){console.log(v)}s++}if(-1!=t.turn_id)try{var d=(await V.get(t.turn_id)).data,l=(await V.index(t.another_customer_name)).data,o=await l.length,c=l.findIndex((e=>e.id==t.turn_id));d["made_date"]=t.made_date,d["name"]=t.name,d["in"]=t.out,d["out"]=t.in,d["stock"]=d.stock-n;try{await V.put(d)}catch(v){console.log(v)}c++;while(c!=o){d=l[c];d["stock"]=d.stock-n;try{await V.put(d),c++}catch(v){console.log(v)}}}catch(v){console.log(v)}this.updateAllTrades()}else{t.made_date=`${t.made_date} 23:59:59`;s=e-1;while(s>=0){if(!(this.allTrades[s].made_date>t.made_date))break;s--}if(a=-1==s?0:this.allTrades[s].stock,t["stock"]=a+i,""==t.inCustomer)try{var m=(await V.post(t)).data;this.changeItemId=m.id}catch(v){console.log(v)}else{var u=0===t.in;t["go"]=u?`轉出至${t.inCustomer}`:`${t.inCustomer}轉入`,t["another_customer_name"]=t.inCustomer;try{var h=(await V.post(t)).data;try{l=(await V.index(t.inCustomer)).data,o=await l.length,d={};d["turn_id"]=await h.id,d["made_date"]=t.made_date,d["name"]=t.name,d["customer_name"]=t.inCustomer,d["another_customer_name"]=t.customer_name,d["user_name"]=t.user_name,u?(d["in"]=t.out,d["go"]=`${t.customer_name}轉入`):(d["out"]=t.in,d["go"]=`轉出至${t.customer_name}`);c=o-1;while(c>=0){if(!(l[c].made_date>t.made_date))break;c--}var p=-1==c?0:l[c].stock;d["stock"]=parseInt(p)-i;var x=(await V.post(d)).data;h["turn_id"]=await x.id,await V.put(h),this.changeItemId=h.id,c++;while(c<o){var f=l[c];f.stock-=i;try{await V.put(f)}catch(v){console.log(v)}c++}}catch(v){console.log(v)}}catch(v){console.log(v)}}s++;while(s<e){f=this.allTrades[s];f.stock+=i;try{await V.put(f)}catch(v){console.log(v)}s++}this.updateAllTrades()}this.close(),this.$loading(!1)}}}},Qe=Je,Xe=(0,c.Z)(Qe,He,Ke,!1,null,"7632926f",null),ta=Xe.exports,ea=function(){var t=this,e=t._self._c;return e(St.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.trades,"items-per-page":10},scopedSlots:t._u([{key:"footer",fn:function(){return[e(Pt.Z,{attrs:{flat:""}},[e("div",[e(oe.qW,[t._v(t._s(t.customerName)+" 客戶往來交易資料")]),e("p",[t._v(t._s(t.customerInfo.homePhone)+" | "+t._s(t.customerInfo.phone))])],1),e(de.Z,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e(y.Z),e(Dt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e("download-excel",{staticClass:"btn",attrs:{header:`交 易 紀 錄\n年昌碾米工廠 地址: 玉里中華路28號\n電話: 03-8883066 03-8882066 傳真: 03-8881066\n 廠商編號：${t.customerInfo.taxId} 廠商姓名： ${t.customerInfo.name}\n 廠商地址： ${t.customerInfo.address}\n 廠商手機： ${t.customerInfo.homePhone} 廠商手機： ${t.customerInfo.phone}`,data:t.trades,fields:t.json_fields,worksheet:"客戶往來交易",name:t.customerName+"客戶往來交易.xls"}},[t._v(" 下載Excel ")]),e(p.Z,{staticClass:"mb-2 mr-2",on:{click:t.printEnvelope}},[t._v(" 列印信封 ")]),e(p.Z,{staticClass:"mb-2 mr-2",on:{click:t.printReceipt}},[t._v(" 列印客戶往來交易 ")]),e(p.Z,{staticClass:"mb-2 mr-2",attrs:{color:"primary"},on:{click:t.showLoan}},[t._v(" 結算利息 ")]),e(p.Z,t._g(t._b({staticClass:"mb-2 mr-2",attrs:{color:"primary"}},"v-btn",i,!1),a),[t._v(" 客戶往來交易 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Tt.Z,{staticClass:"change-position"},[e(Ct.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(Ct.ZB,[-1==t.editedIndex?e(f.Z,[e(b.Z,[e(I.Z,{ref:"menu_made_date",attrs:{"close-on-content-click":!1,"return-value":t.editedItem.made_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){return t.$set(t.editedItem,"made_date",e)},"update:return-value":function(e){return t.$set(t.editedItem,"made_date",e)}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Z.Z,t._g(t._b({attrs:{label:"交易日期","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.editedItem.made_date,callback:function(e){t.$set(t.editedItem,"made_date",e)},expression:"editedItem.made_date"}},"v-text-field",i,!1),a))]}}],null,!1,545477903),model:{value:t.menu_made_date,callback:function(e){t.menu_made_date=e},expression:"menu_made_date"}},[e(v.Z,{attrs:{"no-title":"",scrollable:""},model:{value:t.editedItem.made_date,callback:function(e){t.$set(t.editedItem,"made_date",e)},expression:"editedItem.made_date"}},[e(y.Z),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu_made_date=!1}}},[t._v(" Cancel ")]),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu_made_date.save(t.editedItem.made_date)}}},[t._v(" OK ")])],1)],1)],1),e(b.Z,[e(x.Z,{staticClass:"pa-0"},[e(re.Z,{attrs:{items:t.productNames,label:"商品選項",rules:[t.required]},on:{input:t.chooseProduct},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(x.Z,{staticClass:"ml-2 pa-0"},[e(Z.Z,{staticClass:"ml-2",attrs:{label:"單價",rules:[t.required]},model:{value:t.editedItem.uintPrice,callback:function(e){t.$set(t.editedItem,"uintPrice",e)},expression:"editedItem.uintPrice"}})],1)],1),e(b.Z,[e(Z.Z,{staticClass:"pr-4",attrs:{label:"數量"},model:{value:t.editedItem.number,callback:function(e){t.$set(t.editedItem,"number",e)},expression:"editedItem.number"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"備註"},model:{value:t.editedItem.comment,callback:function(e){t.$set(t.editedItem,"comment",e)},expression:"editedItem.comment"}})],1)],1):e(f.Z,[e(b.Z,[e(Z.Z,{attrs:{label:"交易日期（無法修改）",readonly:""},model:{value:t.formMadeDate,callback:function(e){t.formMadeDate=e},expression:"formMadeDate"}})],1),e(b.Z,[e(x.Z,{staticClass:"pa-0"},["利息"==t.editedItem.name?e(Z.Z,{staticClass:"pr-4",attrs:{label:"商品選項（無法修改）",readonly:""},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}}):e(Yt.Z,{attrs:{items:t.productNames,label:"商品選項（無法修改）",readonly:"",rules:[t.required]},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(x.Z,{staticClass:"ml-2 pa-0"},["利息"==t.editedItem.name||"借現金"==t.editedItem.name?e(Z.Z,{attrs:{label:"單價（無法修改）",readonly:"",rules:[t.required]},model:{value:t.editedItem.uintPrice,callback:function(e){t.$set(t.editedItem,"uintPrice",e)},expression:"editedItem.uintPrice"}}):e(Z.Z,{attrs:{label:"單價",rules:[t.required]},model:{value:t.editedItem.uintPrice,callback:function(e){t.$set(t.editedItem,"uintPrice",e)},expression:"editedItem.uintPrice"}})],1)],1),e(b.Z,["利息"==t.editedItem.name?e(Z.Z,{staticClass:"pr-4",attrs:{readonly:"",label:"數量（無法修改）"},model:{value:t.editedItem.number,callback:function(e){t.$set(t.editedItem,"number",e)},expression:"editedItem.number"}}):"借現金"==t.editedItem.name&&"not"!=t.editedItem.loan?e(Z.Z,{staticClass:"pr-4",attrs:{readonly:"",label:"數量（以結算利息因此無法修改、刪除。若要修改、刪除，請刪除其結算的利息）"},model:{value:t.editedItem.number,callback:function(e){t.$set(t.editedItem,"number",e)},expression:"editedItem.number"}}):e(Z.Z,{staticClass:"pr-4",attrs:{label:"數量"},model:{value:t.editedItem.number,callback:function(e){t.$set(t.editedItem,"number",e)},expression:"editedItem.number"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"備註"},model:{value:t.editedItem.comment,callback:function(e){t.$set(t.editedItem,"comment",e)},expression:"editedItem.comment"}})],1)],1),t.error?e(f.Z,{staticClass:"danger-alert"},[t._v(" "+t._s(t.error)+" ")]):t._e()],1),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(p.Z,{attrs:{color:"blue darken-1",text:"",disabled:""==t.editedItem.name||""==t.editedItem.number||""==t.editedItem.uintPrice||""==t.editedItem.made_date||""==t.editedItem.uintPrice},on:{click:t.save}},[t._v(" 儲存 ")])],1)],1)],1),e(Dt.Z,{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(Tt.Z,[e(Ct.EB,{staticClass:"text-h5"},[t._v("你確定要刪掉這個糧食進出交易嗎？")]),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("確認")]),e(y.Z)],1)],1)],1),e(Dt.Z,{attrs:{"max-width":"800px"},model:{value:t.dialogLoan,callback:function(e){t.dialogLoan=e},expression:"dialogLoan"}},[e(Tt.Z,[e(Ct.EB,[e("span",{staticClass:"text-h5"},[t._v("計算利息")])]),e(Ct.ZB,[e(b.Z,{staticClass:"pa-4"},[e(x.Z,[e(I.Z,{ref:"menu_loan_made_date",attrs:{"close-on-content-click":!1,"return-value":t.loan_made_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.loan_made_date=e},"update:return-value":function(e){t.loan_made_date=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Z.Z,t._g(t._b({attrs:{label:"交易日期","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.loan_made_date,callback:function(e){t.loan_made_date=e},expression:"loan_made_date"}},"v-text-field",i,!1),a))]}}]),model:{value:t.menu_loan_made_date,callback:function(e){t.menu_loan_made_date=e},expression:"menu_loan_made_date"}},[e(v.Z,{attrs:{"no-title":"",scrollable:""},model:{value:t.loan_made_date,callback:function(e){t.loan_made_date=e},expression:"loan_made_date"}},[e(y.Z),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu_loan_made_date=!1}}},[t._v(" Cancel ")]),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu_loan_made_date.save(t.loan_made_date)}}},[t._v(" OK ")])],1)],1)],1),e(x.Z,[e(Z.Z,{attrs:{label:"利率"},model:{value:t.rate,callback:function(e){t.rate=e},expression:"rate"}})],1),e(x.Z,[e(I.Z,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Z.Z,t._g(t._b({attrs:{label:"試算截止日","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"v-text-field",i,!1),a))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[e(v.Z,{attrs:{"no-title":"",scrollable:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[e(y.Z),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu1=!1}}},[t._v(" Cancel ")]),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.menu.save(t.date),t.calculateLoanDay()}}},[t._v(" OK ")])],1)],1)],1)],1),e(St.Z,{staticClass:"elevation-1",attrs:{headers:t.loanHeaders,items:t.loans,"item-key":"id","show-select":""},scopedSlots:t._u([t._l(t.loanHeaders.filter((t=>t.hasOwnProperty("formatter"))),(function(e){return{key:`item.${e.value}`,fn:function({header:e,value:a}){return[t._v(" "+t._s(e.formatter(a))+" ")]}}}))],null,!0),model:{value:t.selectedLoans,callback:function(e){t.selectedLoans=e},expression:"selectedLoans"}})],1),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeLoan}},[t._v(" 取消 ")]),e(p.Z,{attrs:{color:"blue darken-1",text:"",disabled:""==t.rate||0==t.selectedLoans.length},on:{click:t.calculateLoan}},[t._v(" 儲存利息 ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),"借現金"!=a.name||"not"==a.loan?e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")]):t._e()]}},{key:"no-data",fn:function(){return[e("p",{staticClass:"ma-3"},[t._v("你還沒新增資料")]),e("p",{staticClass:"ma-3"},[t._v("如果你新增了，可以按下面的按鈕重整")]),e(p.Z,{staticClass:"mb-3",attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" 重整 ")])]},proxy:!0},{key:"item.grandPrice",fn:function({item:t}){}},t._l(t.headers.filter((t=>t.hasOwnProperty("formatter"))),(function(a){return{key:`item.${a.value}`,fn:function({header:a,value:i}){return["grandPrice"==a.value?e("div",[e("div",i<0?{staticClass:"blue-text"}:{staticClass:"red-text"},[t._v(" "+t._s(a.formatter(i))+" ")])]):e("div",[t._v(" "+t._s(a.formatter(i))+" ")])]}}}))],null,!0)})},aa=[];const ia="api/inwards/products/";var sa={index(){return R().get(`${ia}allItems`)},post(t){return R().post(`${ia}addItem`,t)},put(t){return R().put(`${ia}${t.id}`,t)},delete(t){return R().delete(`${ia}${t.id}`)}},na={props:["dates"],data:()=>({lastTrade:{},error:"",json_fields:{"日期":{callback:t=>t.made_date.slice(0,10)},"名稱":"name","單價":"uintPrice","數量":"number","小計":"aTradePrice","餘額":"grandPrice","備註":"comment"},json_meta:[[{key:"charset",value:"utf-8"}]],customerName:"",customerNames:[],customerInfo:{},rate:1.5,date:"",menu1:!1,today:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),selectedLoans:[],loans:[],menu:!1,menu_made_date:!1,menu_loan_made_date:!1,loan_made_date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),productNames:[],productArr:[],required:t=>0!==t.toString().length||"Required.",dialog:!1,dialogDelete:!1,dialogLoan:!1,currentTime:"",headers:[{text:"日期",value:"made_date",sortable:!1,width:"105px",formatter:t=>t.slice(0,10)},{text:"名稱",align:"start",sortable:!1,value:"name"},{text:"單價",value:"uintPrice",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"數量",value:"number",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"小計",value:"aTradePrice",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"餘額",value:"grandPrice",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"結算日期",value:"payLoanDate",sortable:!1,width:"105px",formatter:t=>t?t.slice(0,10):"-"},{text:"備註",value:"comment",sortable:!1},{text:"功能",value:"actions",sortable:!1,width:"10%"}],loanHeaders:[{text:"日期",value:"made_date",sortable:!1,width:"105px",formatter:t=>t.slice(0,10)},{text:"名稱",align:"start",sortable:!1,value:"name"},{text:"單價",value:"uintPrice",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"數量",value:"number",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"小計",value:"aTradePrice",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"結算天數",value:"day",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")}],changeItemId:null,trades:[],allTrades:[],editedIndex:-1,editedItem:{name:"",uintPrice:"",number:"",comment:"",made_date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)},defaultItem:{name:"",uintPrice:"",number:"",comment:"",made_date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)}}),mounted(){},computed:{formTitle(){return-1===this.editedIndex?"新增客戶往來交易":"編輯客戶往來交易"},formMadeDate(){return this.editedItem.made_date.slice(0,10)}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()},dialogLoan(t){t||this.closeLoan()}},created(){},methods:{chooseProduct(){"利息"==this.editedItem.name?this.editedItem.uintPrice=1:this.editedItem.uintPrice=this.productArr[this.editedItem.name].price},calculateLoanDay(){const t=new Date(this.date);this.loans.forEach((e=>{const a=new Date(e.made_date),i=Math.ceil(Math.abs(a-t)/864e5);e.day=i}))},async calculateLoan(){this.$loading(!0);var t=0,e="";this.selectedLoans.forEach((a=>{t+=a.number/100*this.rate*(a.day/30),e+=`${a.id} `})),t=Math.ceil(t);var a=this.allTrades.length,i=0!=a?this.allTrades[a-1].grandPrice:0,s={name:"利息",number:t,uintPrice:1,aTradePrice:t,loan:e,customer_name:this.customerName,user_name:this.$store.state.user.account,made_date:`${this.loan_made_date.substr(0,10)} 23:59:59`,comment:`結算至${this.date.substr(0,10)}`},n=a-1;while(n>=0){if(!(this.allTrades[n].made_date>s.made_date))break;n--}i=-1==n?0:this.allTrades[n].grandPrice;s["grandPrice"]=i+t;try{var r=(await U.post(s)).data;for(var d of(this.changeItemId=r.id,this.selectedLoans))try{d.payLoanDate=this.date,d.loan=r.id,await U.put(d)}catch(o){console.log(o)}}catch(o){console.log(o)}n++;while(n<a){var l=this.allTrades[n];l.grandPrice+=t;try{await U.put(l)}catch(o){console.log(o)}n++}this.updateAllTrades(),this.closeLoan(),this.$loading(!1)},showLoan(){this.dialogLoan=!0,this.loans=[],this.allTrades.forEach((t=>{"not"==t.loan&&this.loans.push(t)})),this.calculateLoanDay()},checkInp(t){return!!isNaN(t)&&(this.error="請輸入正確格式",!0)},printEnvelope(){let t=this.$router.resolve({name:"printEnvelope"});this.$store.dispatch("setPrintCustomer",this.customerInfo),window.open(t.href,"_blank")},printReceipt(){let t=this.$router.resolve({name:"printInwardsOtherTrade",query:{all:!1}});this.$store.dispatch("setPrintData",this.trades),this.$store.dispatch("setPrintCustomer",this.customerInfo),window.open(t.href,"_blank")},filterTrades(){var t=new Date(`${this.dates[0]}T00:00:00`),e=new Date(`${this.dates[1]}T24:00:00`);this.trades=this.allTrades.filter((function(a){var i=new Date(a.made_date);return i>=t&&i<=e}))},async initialize(){this.date=this.today;const t=(await sa.index()).data;this.productArr=[],t.forEach((t=>{this.productNames.push(t.name),this.productArr[t.name]=t}));var e={name:"借現金",price:1};this.productNames.push("借現金"),this.productArr["借現金"]=e,this.updateAllTradesByLastTen()},getLastTenTrades(){this.trades=this.allTrades.slice(Math.max(this.allTrades.length-10,0))},getChangeIdLeftTrades(){let t=this.allTrades.indexOf(this.allTrades.find((t=>t.id===this.changeItemId)));this.allTrades.length-t<10?this.trades=this.allTrades.slice(Math.max(this.allTrades.length-10,0)):this.trades=this.allTrades.slice(Math.max(t,0))},async updateAllTrades(){this.allTrades=(await U.index(this.customerName)).data,this.getChangeIdLeftTrades()},async updateAllTradesByLastTen(){this.allTrades=(await U.index(this.customerName)).data,this.getLastTenTrades()},editItem(t){this.editedIndex=this.allTrades.indexOf(t),this.editedItem=Object.assign({},t),this.editedItem.uint="公斤",this.dialog=!0},deleteItem(t){this.editedIndex=this.allTrades.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},async deleteItemConfirm(){if(this.$loading(!0),"利息"!=this.editedItem.name&&"借現金"!=this.editedItem.name){var t=this.productArr[this.editedItem.name];t.stock=t.stock+this.editedItem.number;try{await sa.put(t)}catch(r){console.log(r)}}var e=this.editedItem.aTradePrice,a=this.editedIndex;a++;while(a!=this.allTrades.length){var i=this.allTrades[a];i["grandPrice"]=i.grandPrice-e;try{await U.put(i),a++}catch(r){console.log(r)}}if("利息"==this.editedItem.name){var s=(this.editedItem.loan+"").split(" ");for(var n of s){if(""==n)break;i=this.allTrades.find((t=>t.id===parseInt(n)));i.loan="not",i.payLoanDate=null;try{await U.put(i)}catch(r){console.log(r)}}}try{await U["delete"](this.editedItem)}catch(r){console.log(r)}this.updateAllTradesByLastTen(),this.closeDelete(),this.$loading(!1)},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})),this.error=""},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},closeLoan(){this.dialogLoan=!1,this.selectedLoans=[],this.date=this.today},async save(){this.$loading(!0);var t=this.editedItem;if(this.checkInp(t.number)||this.checkInp(t.uintPrice))this.$loading(!1);else{var e=this.allTrades.length;t["customer_name"]=this.customerName,t["user_name"]=this.$store.state.user.account,t["aTradePrice"]=Math.round(t.uintPrice*t.number);var a=0;if("利息"!=this.editedItem.name&&"借現金"!=this.editedItem.name){var i=this.productArr[t.name],s=t.number;this.editedIndex>-1&&(s-=this.allTrades[this.editedIndex].number),i.stock=i.stock-s;try{await sa.put(i)}catch(l){console.log(l)}}if(this.editedIndex>-1){this.changeItemId=t.id,0!=this.editedIndex&&(a=this.allTrades[this.editedIndex-1].grandPrice);while(1){a+=t.aTradePrice,t["grandPrice"]=a;try{if(await U.put(t),this.editedIndex++,this.editedIndex==e)break;t=this.allTrades[this.editedIndex]}catch(l){console.log(l)}}this.updateAllTrades()}else{"借現金"==t.name&&(t.loan="not"),t.made_date=`${t.made_date} 23:59:59`;var n=e-1;while(n>=0){if(!(this.allTrades[n].made_date>t.made_date))break;n--}a=-1==n?0:this.allTrades[n].grandPrice,t["grandPrice"]=a+t.aTradePrice;try{var r=(await U.post(t)).data;this.changeItemId=r.id}catch(l){console.log(l)}n++;while(n<e){var d=this.allTrades[n];d.grandPrice+=t.aTradePrice;try{await U.put(d)}catch(l){console.log(l)}n++}this.updateAllTrades()}this.close(),this.$loading(!1)}}}},ra=na,da=(0,c.Z)(ra,ea,aa,!1,null,"285f4b66",null),la=da.exports,oa={components:{Titlepanel:yt,Trade:ta,OtherTrade:la},data:()=>({today:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),dateText:"",dates:[],menu:!1,searchCustomer:"null",customerNames:[],customerName:"",customerInfo:{},lastOtherTrade:{}}),mounted(){},computed:{formTitle(){return-1===this.editedIndex?"新增糧食進出交易":"編輯糧食進出交易"},lastOtherTradeGrandPrice(){return void 0==this.lastOtherTrade.grandPrice?0:(""+this.lastOtherTrade.grandPrice).replace(/\B(?=(\d{3})+(?!\d))/g,",")}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()},dialogCashTime(t){t||this.closeCashTime()}},created(){this.$loading(!0),this.initialize(),this.$loading(!1)},methods:{printEnvelope(){let t=this.$router.resolve({name:"printEnvelope"});this.$store.dispatch("setPrintCustomer",this.customerInfo),window.open(t.href,"_blank")},printReceipt(){let t=this.$router.resolve({name:"printInwardsTrade",query:{date:this.dates[0]}});this.$store.dispatch("setPrintData",this.trades),this.$store.dispatch("setPrintCustomer",this.customerInfo),window.open(t.href,"_blank")},checkInp(t){return!!isNaN(t)&&(this.error="請輸入正確格式",!0)},dateRangeText(){if(void 0==this.dates[1]&&(this.dates[1]=this.dates[0]),new Date(this.dates[0])>new Date(this.dates[1])){var t=this.dates[1];this.dates[1]=this.dates[0],this.dates[0]=t}this.dateText=this.dates[0]+"~"+this.dates[1]},changeDate(t){var e;"today"==t?(this.dates[0]=this.today,this.dates[1]=this.today):"week"==t?(e=new Date(this.dates[0]),e.setDate(e.getDate()-7),this.dates[0]=e.toISOString().substr(0,10)):"month"==t?(e=new Date(this.dates[0]),e.setDate(e.getDate()-30),this.dates[0]=e.toISOString().substr(0,10)):"year"==t&&(e=new Date(this.dates[0]),e.setFullYear(e.getFullYear()-1),this.dates[0]=e.toISOString().substr(0,10)),this.dateRangeText(),this.$refs.riceTrade.filterTrades(),this.$refs.otherTrade.filterTrades()},filterTrades(){this.dateRangeText(),this.$refs.riceTrade.filterTrades(),this.$refs.otherTrade.filterTrades()},async search(){try{var t=(await Re.index()).data;if(this.customerNames=t.map((t=>t.name)),this.customerName=this.$store.state.route.params.customerName,"null"==this.customerName)return;t.forEach((t=>{t.name==this.customerName&&(this.customerInfo=t)})),this.$refs.riceTrade.dates=this.dates,this.$refs.riceTrade.customerName=this.customerName,this.$refs.riceTrade.customerNames=this.customerNames,this.$refs.riceTrade.customerInfo=this.customerInfo,this.$refs.riceTrade.initialize(),this.$refs.otherTrade.dates=this.dates,this.$refs.otherTrade.customerName=this.customerName,this.$refs.otherTrade.customerNames=this.customerNames,this.$refs.otherTrade.customerInfo=this.customerInfo,this.$refs.otherTrade.initialize(),this.lastOtherTrade=(await U.getLastTrade(this.customerName)).data}catch(e){console.log(e)}},initialize(){this.search()}}},ca=oa,ma=(0,c.Z)(ca,Ve,Fe,!1,null,null,null),ua=ma.exports,ha=function(){var t=this,e=t._self._c;return e("titlepanel",{attrs:{title:"進 貨 "}},[e("div",{staticClass:"white"},[e("div",{staticClass:"subTitle"},[e("b",[t._v("產品銷貨篩選條件")])]),e(b.Z,[e(x.Z,{attrs:{cols:"12",md:"3"}},[e(I.Z,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.dates,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.dates=e},"update:return-value":function(e){t.dates=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Z.Z,t._g(t._b({attrs:{label:"篩選日期","prepend-icon":"mdi-calendar",readonly:"",dense:"",outlined:"",flat:"",solo:""},model:{value:t.dateText,callback:function(e){t.dateText=e},expression:"dateText"}},"v-text-field",i,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(v.Z,{attrs:{"no-title":"",range:""},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}},[e(y.Z),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v(" Cancel ")]),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.menu.save(t.dates),t.dateRangeText()}}},[t._v(" OK ")])],1)],1)],1),e(x.Z,{staticClass:"d-flex flex-row",attrs:{cols:"12",md:"4"}},[e(p.Z,{on:{click:function(e){return t.changeDate("today")}}},[t._v("今日")]),e(p.Z,{on:{click:function(e){return t.changeDate("week")}}},[t._v("前七日")]),e(p.Z,{on:{click:function(e){return t.changeDate("month")}}},[t._v("前一個月")]),e(p.Z,{on:{click:function(e){return t.changeDate("year")}}},[t._v("前一年")])],1)],1)],1),e(Tt.Z,[e(Ct.EB,[t._v(" 產品資料 "),e(y.Z),e(Z.Z,{attrs:{"append-icon":"mdi-magnify",label:"搜尋產品","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(St.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.products,"items-per-page":10,"item-key":"name",search:t.search,"custom-filter":t.filterOnlyCapsText},scopedSlots:t._u([{key:"footer",fn:function(){return[e(Pt.Z,{attrs:{flat:""}},[e(y.Z),e(Dt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(p.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),a),[t._v(" 新增產品 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Tt.Z,[e(Ct.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(Ct.ZB,[e(f.Z,[-1!=t.editedIndex?e(b.Z,[e(Z.Z,{attrs:{label:"產品名稱（無法修改）",readonly:""},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1):e(b.Z,[e(Z.Z,{attrs:{label:"產品名稱",rules:[t.required]},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"庫存"},model:{value:t.editedItem.stock,callback:function(e){t.$set(t.editedItem,"stock",e)},expression:"editedItem.stock"}})],1),e(b.Z,[e(Z.Z,{attrs:{label:"單價",rules:[t.required]},model:{value:t.editedItem.price,callback:function(e){t.$set(t.editedItem,"price",e)},expression:"editedItem.price"}})],1)],1),t.error?e(f.Z,{staticClass:"danger-alert"},[t._v(" "+t._s(t.error)+" ")]):t._e()],1),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(p.Z,{attrs:{color:"blue darken-1",text:"",disabled:""==t.editedItem.name||""==t.editedItem.price},on:{click:t.save}},[t._v(" 儲存 ")])],1)],1)],1),e(Dt.Z,{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(Tt.Z,[e(Ct.EB,{staticClass:"text-h5"},[t._v("你確定要刪掉這個產品嗎？")]),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("確認")]),e(y.Z)],1)],1)],1),e(Dt.Z,{attrs:{"max-width":"1200px"},model:{value:t.dialogSearch,callback:function(e){t.dialogSearch=e},expression:"dialogSearch"}},[e(Tt.Z,[e(Ct.EB,{staticClass:"text-h5 justify-space-between"},[e("div",[t._v(" "+t._s(t.editedItem.name)+" ")]),e("div",{staticClass:"text1 d-flex flex-row px-2"},[t._v(" 共賣出"+t._s(t.sum)+"份 ")])]),e(Ct.ZB,[e(St.Z,{staticClass:"elevation-1",attrs:{headers:t.tradeHeaders,items:t.trades,"item-key":"id"},scopedSlots:t._u([t._l(t.tradeHeaders.filter((t=>t.hasOwnProperty("formatter"))),(function(a){return{key:`item.${a.value}`,fn:function({header:a,value:i}){return["grandPrice"==a.value&&i>0?e("div",{staticClass:"blue-text"},[t._v(" "+t._s(a.formatter(i))+" ")]):"grandPrice"==a.value&&i<0?e("div",{staticClass:"red-text"},[t._v(" "+t._s(a.formatter(i))+" ")]):"grandPrice"==a.value&&0==i?e("div",{staticClass:"zero"},[t._v(" "+t._s(a.formatter(i))+" ")]):e("div",[t._v(" "+t._s(a.formatter(i))+" ")])]}}}))],null,!0)})],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")]),e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.searchItem(a)}}},[t._v(" mdi-card-search ")])]}},{key:"no-data",fn:function(){return[e("p",{staticClass:"ma-3"},[t._v("你還沒新增資料")]),e("p",{staticClass:"ma-3"},[t._v("如果你新增了，可以按下面的按鈕重整")]),e(p.Z,{staticClass:"mb-3",attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" 重整 ")])]},proxy:!0}])})],1)],1)},pa=[],xa={components:{Titlepanel:yt},data:()=>({tradeHeaders:[{text:"日期",value:"made_date",sortable:!1,width:"105px",formatter:t=>t.slice(0,10)},{text:"顧客",align:"start",sortable:!1,value:"customer_name"},{text:"單價",value:"uintPrice",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"數量",value:"number",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"小計",value:"aTradePrice",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"餘額",value:"grandPrice",sortable:!1,formatter:t=>(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},{text:"結算日期",value:"payLoanDate",sortable:!1,width:"105px",formatter:t=>t?t.slice(0,10):"-"},{text:"備註",value:"comment",sortable:!1}],trades:[],search:"",sum:0,today:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),dateText:"",dates:[],menu:!1,error:"",required:t=>!!t||"Required.",dialog:!1,dialogDelete:!1,dialogSearch:!1,headers:[{text:"產品",align:"start",sortable:!1,value:"name"},{text:"庫存",value:"stock",sortable:!1},{text:"單價",value:"price",sortable:!1},{text:"功能",value:"actions",sortable:!1}],products:[],productNames:[],editedIndex:-1,editedItem:{name:"",stock:"",price:""},defaultItem:{name:"",stock:"",price:""}}),computed:{formTitle(){return-1===this.editedIndex?"新增產品":"編輯產品"}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()},dialogSearch(t){t||this.closeSearch()}},created(){this.$loading(!0),this.initialize(),this.$loading(!1)},methods:{changeDate(t){var e;"today"==t?(this.dates[0]=this.today,this.dates[1]=this.today):"week"==t?(e=new Date(this.dates[0]),e.setDate(e.getDate()-7),this.dates[0]=e.toISOString().substr(0,10)):"month"==t?(e=new Date(this.dates[0]),e.setMonth(e.getMonth()-1),this.dates[0]=e.toISOString().substr(0,10)):"year"==t&&(e=new Date(this.dates[0]),e.setFullYear(e.getFullYear()-1),this.dates[0]=e.toISOString().substr(0,10)),this.dateRangeText()},filterOnlyCapsText(t,e,a){return null!=t&&null!=e&&"string"===typeof t&&-1!==t.toString().indexOf(e)},dateRangeText(){if(void 0==this.dates[1]&&(this.dates[1]=this.dates[0]),new Date(this.dates[0])>new Date(this.dates[1])){var t=this.dates[1];this.dates[1]=this.dates[0],this.dates[0]=t}this.dateText=this.dates[0]+"~"+this.dates[1]},checkInp(t){return!!isNaN(t)&&(this.error="請輸入正確格式",!0)},async initialize(){this.products=(await sa.index()).data,this.productNames=this.products.map((t=>t.name));var t=new Date(this.today);t.setDate(t.getDate()-30),this.dates[0]=t.toISOString().substr(0,10),this.dates[1]=this.today,this.dateRangeText()},editItem(t){this.editedIndex=this.products.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.products.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},async searchItem(t){this.sum=0;var e=new Date(`${this.dates[0]}T00:00:00`),a=new Date(`${this.dates[1]}T24:00:00`);this.trades=(await U.getAllItemsByProduct(t.name,e.toISOString()+","+a.toISOString())).data,console.log(this.trades),this.trades.forEach((t=>{this.sum+=t.number})),this.editedItem=Object.assign({},t),this.dialogSearch=!0},async deleteItemConfirm(){this.$loading(!0);try{await sa["delete"](this.editedItem),this.closeDelete()}catch(t){console.log(t)}this.initialize(),this.$loading(!1)},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})),this.error=""},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},closeSearch(){this.dialogSearch=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},async save(){this.$loading(!0);var t=this.editedItem;if(this.checkInp(t.price)||this.checkInp(t.stock))this.$loading(!1);else{if(""==t.stock&&(t.stock=0),this.editedIndex>-1)try{await sa.put(t),this.initialize()}catch(e){console.log(e)}else{const a=t=>t==this.editedItem.name;if(this.productNames.some(a))return this.error="你已經有這個品項了",void this.$loading(!1);try{await sa.post(t),this.initialize()}catch(e){console.log(e)}}this.close(),this.$loading(!1)}}}},fa=xa,va=(0,c.Z)(fa,ha,pa,!1,null,"7349567f",null),ga=va.exports,_a=function(){var t=this,e=t._self._c;return e("titlepanel",{attrs:{title:"進 貨 "}},[e("div",{staticClass:"white"},[e("div",{staticClass:"subTitle"},[e("b",[t._v("米銷貨篩選條件")])]),e(b.Z,[e(x.Z,{attrs:{cols:"12",md:"3"}},[e(re.Z,{attrs:{items:t.ricekindNames,label:"產品選項",dense:"",outlined:"",solo:""},model:{value:t.searchRicekind,callback:function(e){t.searchRicekind=e},expression:"searchRicekind"}})],1),e(x.Z,{attrs:{cols:"12",md:"3"}},[e(I.Z,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.dates,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.dates=e},"update:return-value":function(e){t.dates=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Z.Z,t._g(t._b({attrs:{label:"篩選日期","prepend-icon":"mdi-calendar",readonly:"",dense:"",outlined:"",flat:"",solo:""},model:{value:t.dateText,callback:function(e){t.dateText=e},expression:"dateText"}},"v-text-field",i,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(v.Z,{attrs:{"no-title":"",range:""},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}},[e(y.Z),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v(" Cancel ")]),e(p.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.menu.save(t.dates),t.dateRangeText()}}},[t._v(" OK ")])],1)],1)],1),e(x.Z,{staticClass:"pt-3",attrs:{cols:"12",md:"1"}},[e(p.Z,{staticClass:"d-flex",attrs:{disabled:""==t.searchRicekind||null==t.dates},on:{click:t.calculateSum}},[t._v(" 搜尋 ")])],1),""!=t.searchRicekind?e(x.Z,{staticClass:"pl-0 d-flex flex-row",attrs:{cols:"12",md:"5"}},[e("div",[e("b",{staticClass:"text1"},[t._v(t._s(this.searchRicekind)+"進貨"+t._s(this.sum)+"份")])])]):t._e()],1)],1),e(Tt.Z,[e(Ct.EB,[t._v(" 米的種類資料 "),e(y.Z),e(Z.Z,{attrs:{"append-icon":"mdi-magnify",label:"搜尋米的種類","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(St.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.ricekinds,"items-per-page":10,"item-key":"name",search:t.search,"custom-filter":t.filterOnlyCapsText},scopedSlots:t._u([{key:"footer",fn:function(){return[e(Pt.Z,{attrs:{flat:""}},[e(y.Z),e(Dt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(p.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),a),[t._v(" 新增米項目 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Tt.Z,[e(Ct.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(Ct.ZB,[e(f.Z,[e(b.Z,[e(Z.Z,{attrs:{label:"米項目名稱",rules:[t.required]},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1)],1),t.error?e(f.Z,{staticClass:"danger-alert"},[t._v(" "+t._s(t.error)+" ")]):t._e()],1),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(p.Z,{attrs:{color:"blue darken-1",text:"",disabled:""==t.editedItem.name},on:{click:t.save}},[t._v(" 儲存 ")])],1)],1)],1),e(Dt.Z,{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(Tt.Z,[e(Ct.EB,{staticClass:"text-h5"},[t._v("你確定要刪掉這個米項目嗎？")]),e(Ct.h7,[e(y.Z),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),e(p.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("確認")]),e(y.Z)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e(Ot.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[e("p",{staticClass:"ma-3"},[t._v("你還沒新增資料")]),e("p",{staticClass:"ma-3"},[t._v("如果你新增了，可以按下面的按鈕重整")]),e(p.Z,{staticClass:"mb-3",attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" 重整 ")])]},proxy:!0}])})],1)],1)},Ia=[],ba={components:{Titlepanel:yt},data:()=>({search:"",error:"",sum:0,today:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),dateText:"",dates:[],menu:!1,searchRicekind:"",required:t=>!!t||"Required.",dialog:!1,dialogDelete:!1,headers:[{text:"米項目名",align:"start",sortable:!1,value:"name"},{text:"功能",value:"actions",sortable:!1}],ricekinds:[],ricekindNames:[],editedIndex:-1,editedItem:{name:""},defaultItem:{name:""}}),computed:{formTitle(){return-1===this.editedIndex?"新增米項目":"編輯米項目"}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},created(){this.$loading(!0),this.initialize(),this.$loading(!1)},methods:{filterOnlyCapsText(t,e,a){return null!=t&&null!=e&&"string"===typeof t&&-1!==t.toString().indexOf(e)},async calculateSum(){this.$loading(!0),this.sum=0;var t=new Date(`${this.dates[0]}T00:00:00`),e=new Date(`${this.dates[1]}T24:00:00`),a=(await V.getAllItemsByRicekind(this.searchRicekind,t.toISOString()+","+e.toISOString())).data;a.forEach((t=>{-1==t.turn_id&&(this.sum+=t.in,this.sum-=t.out)})),this.$loading(!1)},dateRangeText(){if(void 0==this.dates[1]&&(this.dates[1]=this.dates[0]),new Date(this.dates[0])>new Date(this.dates[1])){var t=this.dates[1];this.dates[1]=this.dates[0],this.dates[0]=t}this.dateText=this.dates[0]+"~"+this.dates[1]},async initialize(){this.ricekinds=(await Ge.index()).data,this.ricekindNames=this.ricekinds.map((t=>t.name));var t=new Date(this.today);t.setDate(t.getDate()-30),this.dates[0]=t.toISOString().substr(0,10),this.dates[1]=this.today,this.dateRangeText()},deleteItem(t){this.editedIndex=this.ricekinds.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},async deleteItemConfirm(){this.$loading(!0);try{await Ge["delete"](this.editedItem),this.closeDelete()}catch(t){console.log(t)}this.initialize(),this.$loading(!1)},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},async save(){this.$loading(!0);const t=t=>t==this.editedItem.name;if(this.ricekindNames.some(t))return this.error="你已經有這個品項了",void this.$loading(!1);try{await Ge.post(this.editedItem)}catch(e){console.log(e)}this.initialize(),this.close(),this.$loading(!1)}}},ya=ba,Za=(0,c.Z)(ya,_a,Ia,!1,null,"11785cb0",null),ka=Za.exports,wa=function(){var t=this,e=t._self._c;return e("div",{staticClass:"receipt"},[e("div",{staticStyle:{position:"relative",height:"831.6px",width:"378px","background-color":"antiquewhite","font-size":"20px","text-align":"start"}},[e("div",{staticStyle:{position:"absolute",top:"280px",right:"100px","writing-mode":"vertical-rl","text-orientation":"mixed"}},[e("p",[t._v(t._s(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)))]),e("p",[t._v("電話："+t._s(this.customerInfo.homePhone))]),e("p",[t._v(t._s(this.customerInfo.address))])]),e("div",{staticStyle:{position:"absolute",top:"360px",right:"260px","writing-mode":"vertical-rl","text-orientation":"mixed","font-size":"24px"}},[e("p",[t._v(t._s(this.customerInfo.name)+" 收")])])]),e(p.Z,{staticClass:"print",on:{click:t.printFunc}},[t._v("列印")])],1)},$a=[],Ta={data:()=>({printSelect:0,date:date,customerInfo:{},trades:[],allTrades:[]}),created(){this.initialize()},methods:{initialize(){this.customerInfo=this.$store.state.printCustomerInfo},printFunc(){window.print()}}},Ca=Ta,Sa=(0,c.Z)(Ca,wa,$a,!1,null,"9d51db20",null),Da=Sa.exports,Oa=function(){var t=this,e=t._self._c;return e("div",{staticClass:"receipt"},[e("div",{staticStyle:{position:"relative",width:"812px","background-color":"antiquewhite",overflow:"hidden"}},[t._m(0),"false"==this.$route.query.all?e("div",{staticStyle:{display:"flex"}},[e("div",{staticStyle:{width:"70%","text-align":"left"}},[e("p",[t._v("廠商編號： "+t._s(t.customerInfo.taxId))]),e("p",[t._v("廠商姓名： "+t._s(t.customerInfo.name))]),e("p",[t._v("廠商地址： "+t._s(t.customerInfo.address))])]),e("div",{staticStyle:{width:"30%","text-align":"left"}},[e("p",[t._v("廠商電話： "+t._s(t.customerInfo.homePhone))]),e("p",[t._v("製表日期： "+t._s(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)))])])]):t._e(),"false"==this.$route.query.all?e("div",{staticStyle:{"margin-top":"5px",width:"100%"}},[t._m(1),e("div",{staticStyle:{"min-height":"240px"}},t._l(t.trades,(function(a,i){return e("div",{staticStyle:{display:"flex"}},[e("p",{staticStyle:{width:"13%","text-align":"center",margin:"1px 3px"}},[t._v(t._s(a.made_date.slice(0,10)))]),e("p",{staticStyle:{width:"15%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.name))]),e("p",{staticStyle:{width:"9%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.in)))]),e("p",{staticStyle:{width:"9%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.out)))]),e("p",{staticStyle:{width:"10%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.stock)))]),e("p",{staticStyle:{width:"20%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.go))]),e("p",{staticStyle:{width:"24%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.comment))])])})),0)]):e("div",{staticStyle:{"margin-top":"5px",width:"100%"}},[t._m(2),e("div",{staticStyle:{"min-height":"240px"}},[t._l(t.trades,(function(a,i){return e("div",[t.diffIndex.includes(i)?e("div",{staticClass:"my-1",staticStyle:{"border-top":"2px solid #000","border-bottom":"2px solid #000"}}):t._e(),e("div",{staticStyle:{display:"flex"}},[e("p",{staticStyle:{width:"16%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.customer_name))]),e("p",{staticStyle:{width:"9%","text-align":"center",margin:"1px 3px"}},[t._v(t._s(a.made_date.slice(0,10)))]),e("p",{staticStyle:{width:"12%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.name))]),e("p",{staticStyle:{width:"7%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.in)))]),e("p",{staticStyle:{width:"7%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.out)))]),e("p",{staticStyle:{width:"9%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.stock)))]),e("p",{staticStyle:{width:"18%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.go))]),e("p",{staticStyle:{width:"21%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.comment))])])])})),e("div",{staticClass:"mt-2",staticStyle:{"border-top":"2px solid #000","border-bottom":"2px solid #000"}})],2)])]),e(p.Z,{staticClass:"print",on:{click:t.printFunc}},[t._v("列印")])],1)},Pa=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"text-align":"center"}},[e("h3",[t._v("糧食進出登記簿")]),e("p",[t._v("年昌碾米工廠 地址: 玉里中華路28號")]),e("p",[t._v("電話: 03-8883066 03-8882066 傳真: 03-8881066")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{display:"flex","border-top":"2px solid #000","border-bottom":"2px solid #000"}},[e("p",{staticStyle:{width:"13%","text-align":"center",margin:"1px 3px"}},[t._v("日期")]),e("p",{staticStyle:{width:"9%","text-align":"start",margin:"1px 3px"}},[t._v("品名")]),e("p",{staticStyle:{width:"9%","text-align":"end",margin:"1px 3px"}},[t._v("轉進")]),e("p",{staticStyle:{width:"10%","text-align":"end",margin:"1px 3px"}},[t._v("轉出")]),e("p",{staticStyle:{width:"10%","text-align":"end",margin:"1px 3px"}},[t._v("小計")]),e("p",{staticStyle:{width:"20%","text-align":"start",margin:"1px 3px"}},[t._v("稻穀紀錄")]),e("p",{staticStyle:{width:"24%","text-align":"start",margin:"1px 3px"}},[t._v("備註")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{display:"flex","border-top":"2px solid #000","border-bottom":"2px solid #000"}},[e("p",{staticStyle:{width:"16%","text-align":"center",margin:"1px 3px"}},[t._v("顧客")]),e("p",{staticStyle:{width:"9%","text-align":"center",margin:"1px 3px"}},[t._v("日期")]),e("p",{staticStyle:{width:"12%","text-align":"start",margin:"1px 3px"}},[t._v("品名")]),e("p",{staticStyle:{width:"7%","text-align":"end",margin:"1px 3px"}},[t._v("轉進")]),e("p",{staticStyle:{width:"7%","text-align":"end",margin:"1px 3px"}},[t._v("轉出")]),e("p",{staticStyle:{width:"9%","text-align":"end",margin:"1px 3px"}},[t._v("小計")]),e("p",{staticStyle:{width:"19%","text-align":"start",margin:"1px 3px"}},[t._v("稻穀紀錄")]),e("p",{staticStyle:{width:"21%","text-align":"start",margin:"1px 3px"}},[t._v("備註")])])}],Na={data:()=>({customerInfo:{},trades:[],diffIndex:[]}),created(){this.initialize()},methods:{initialize(){this.trades=this.$store.state.printDataArr,this.customerInfo=this.$store.state.printCustomerInfo;var t=this.trades[0].customer_name;this.trades.forEach((e=>{t!=e.customer_name&&this.diffIndex.push(this.trades.indexOf(e)),t=e.customer_name}))},printFunc(){window.print()},numWithComma(t){return(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")}}},Ba=Na,za=(0,c.Z)(Ba,Oa,Pa,!1,null,"7410d4e6",null),ja=za.exports,qa=function(){var t=this,e=t._self._c;return e("div",{staticClass:"receipt"},[e("div",{staticStyle:{position:"relative",width:"812px","background-color":"antiquewhite",overflow:"hidden"}},[t._m(0),"false"==this.$route.query.all?e("div",{staticStyle:{display:"flex"}},[e("div",{staticStyle:{width:"70%","text-align":"left"}},[e("p",[t._v("廠商編號： "+t._s(t.customerInfo.taxId))]),e("p",[t._v("廠商姓名： "+t._s(t.customerInfo.name))]),e("p",[t._v("廠商地址： "+t._s(t.customerInfo.address))])]),e("div",{staticStyle:{width:"30%","text-align":"left"}},[e("p",[t._v("廠商電話： "+t._s(t.customerInfo.homePhone))]),e("p",[t._v("製表日期： "+t._s(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)))])])]):t._e(),"false"==this.$route.query.all?e("div",{staticStyle:{"margin-top":"5px",width:"100%"}},[t._m(1),e("div",{staticStyle:{"min-height":"240px"}},t._l(t.trades,(function(a,i){return e("div",{staticStyle:{display:"flex"}},[e("p",{staticStyle:{width:"12%","text-align":"center",margin:"1px 3px"}},[t._v(t._s(a.made_date.slice(0,10)))]),e("p",{staticStyle:{width:"34%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.name))]),e("p",{staticStyle:{width:"8%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(a.uintPrice))]),e("p",{staticStyle:{width:"8%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(a.number))]),e("p",{staticStyle:{width:"10%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(a.aTradePrice))]),e("p",{staticStyle:{width:"12%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(a.grandPrice))]),e("p",{staticStyle:{width:"16%","text-align":"start",margin:"3px"}},[t._v(t._s(a.comment))])])})),0)]):e("div",{staticStyle:{"margin-top":"5px",width:"100%"}},[t._m(2),e("div",{staticStyle:{"min-height":"240px"}},[t._l(t.trades,(function(a,i){return e("div",[t.diffIndex.includes(i)?e("div",{staticClass:"my-1",staticStyle:{"border-top":"2px solid #000","border-bottom":"2px solid #000"}}):t._e(),e("div",{staticStyle:{display:"flex"}},[e("p",{staticStyle:{width:"16%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.customer_name))]),e("p",{staticStyle:{width:"9%","text-align":"center",margin:"1px 3px"}},[t._v(t._s(a.made_date.slice(0,10)))]),e("p",{staticStyle:{width:"24%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.name))]),e("p",{staticStyle:{width:"5%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.uintPrice)))]),e("p",{staticStyle:{width:"8%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.number)))]),e("p",{staticStyle:{width:"10%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.aTradePrice)))]),e("p",{staticStyle:{width:"10%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.grandPrice)))]),e("p",{staticStyle:{width:"18%","text-align":"start",margin:"3px"}},[t._v(t._s(a.comment))])])])})),e("div",{staticClass:"mt-2",staticStyle:{"border-top":"2px solid #000","border-bottom":"2px solid #000"}})],2)])]),e(p.Z,{staticClass:"print",on:{click:t.printFunc}},[t._v("列印")])],1)},Ea=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"text-align":"center"}},[e("h3",[t._v("客戶往來交易")]),e("p",[t._v("年昌碾米工廠 地址: 玉里中華路28號")]),e("p",[t._v("電話: 03-8883066 03-8882066 傳真: 03-8881066")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{display:"flex","border-top":"2px solid #000","border-bottom":"2px solid #000"}},[e("p",{staticStyle:{width:"12%","text-align":"center",margin:"1px 3px"}},[t._v("日期")]),e("p",{staticStyle:{width:"34%","text-align":"start",margin:"1px 3px"}},[t._v("名稱")]),e("p",{staticStyle:{width:"8%","text-align":"end",margin:"1px 3px"}},[t._v("單價")]),e("p",{staticStyle:{width:"8%","text-align":"end",margin:"1px 3px"}},[t._v("數量")]),e("p",{staticStyle:{width:"10%","text-align":"end",margin:"1px 3px"}},[t._v("小計")]),e("p",{staticStyle:{width:"12%","text-align":"end",margin:"1px 3px"}},[t._v("餘額")]),e("p",{staticStyle:{width:"16%","text-align":"start",margin:"1px 3px"}},[t._v("備註")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{display:"flex","border-top":"2px solid #000","border-bottom":"2px solid #000"}},[e("p",{staticStyle:{width:"16%","text-align":"center",margin:"1px 3px"}},[t._v("顧客")]),e("p",{staticStyle:{width:"9%","text-align":"center",margin:"1px 3px"}},[t._v("日期")]),e("p",{staticStyle:{width:"24%","text-align":"start",margin:"1px 3px"}},[t._v("名稱")]),e("p",{staticStyle:{width:"5%","text-align":"end",margin:"1px 3px"}},[t._v("單價")]),e("p",{staticStyle:{width:"8%","text-align":"end",margin:"1px 3px"}},[t._v("數量")]),e("p",{staticStyle:{width:"10%","text-align":"end",margin:"1px 3px"}},[t._v("小計")]),e("p",{staticStyle:{width:"10%","text-align":"end",margin:"1px 3px"}},[t._v("餘額")]),e("p",{staticStyle:{width:"18%","text-align":"start",margin:"1px 3px"}},[t._v("備註")])])}],Ra={data:()=>({customerInfo:{},trades:[],diffIndex:[]}),created(){this.initialize()},methods:{initialize(){this.trades=this.$store.state.printDataArr,this.customerInfo=this.$store.state.printCustomerInfo;var t=this.trades[0].customer_name;this.trades.forEach((e=>{t!=e.customer_name&&this.diffIndex.push(this.trades.indexOf(e)),t=e.customer_name}))},printFunc(){window.print()},numWithComma(t){return(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")}}},La=Ra,Ma=(0,c.Z)(La,qa,Ea,!1,null,"4ed61dfe",null),Aa=Ma.exports,Ua=function(){var t=this,e=t._self._c;return e("div",{staticClass:"receipt"},[e("div",{staticStyle:{position:"relative",width:"812px","background-color":"antiquewhite",padding:"5px",overflow:"hidden"}},[t._m(0),e("div",{staticStyle:{display:"flex"}},[e("div",{staticStyle:{width:"70%","text-align":"left"}},[e("p",[t._v("廠商編號： "+t._s(t.customerInfo.taxId))]),e("p",[t._v("廠商姓名： "+t._s(t.customerInfo.name))]),e("p",[t._v("廠商地址： "+t._s(t.customerInfo.address))])]),e("div",{staticStyle:{width:"30%","text-align":"left"}},[e("p",[t._v("廠商電話： "+t._s(t.customerInfo.homePhone))]),e("p",[t._v("列印日期： "+t._s(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)))])])]),e("div",{staticStyle:{"margin-top":"5px",width:"100%"}},[t._m(1),e("div",{staticStyle:{"min-height":"240px"}},t._l(t.trades,(function(a,i){return e("div",{staticStyle:{display:"flex"}},[e("p",{staticStyle:{width:"3%","text-align":"center",margin:"1px 3px"}},[t._v(t._s(i+1))]),e("p",{staticStyle:{width:"18%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.name))]),e("p",{staticStyle:{width:"8%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(a.amount))]),e("p",{staticStyle:{width:"8%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(a.package))]),e("p",{staticStyle:{width:"10%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(a.totalNumber))]),e("p",{staticStyle:{width:"5%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(a.sellUint))]),e("p",{staticStyle:{width:"8%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(a.uintPrice))]),e("p",{staticStyle:{width:"12%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(a.aTradePrice))]),e("p",{staticStyle:{width:"11%","text-align":"center",margin:"1px 3px"}},[t._v(t._s(a.transport))]),e("p",{staticStyle:{width:"15%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.comment))])])})),0),e("div",{staticStyle:{width:"99%",display:"flex","border-top":"2px solid #000","border-bottom":"2px solid #000","margin-top":"20px","padding-left":"10px"}},[e("p",{staticStyle:{width:"25%","text-align":"start"}},[t._v("本次銷售："+t._s((""+this.sum).replace(/\B(?=(\d{3})+(?!\d))/g,","))+"元")]),e("p",{staticStyle:{width:"25%","text-align":"start"}},[t._v("前次累積："+t._s((""+this.formerSum).replace(/\B(?=(\d{3})+(?!\d))/g,","))+"元")]),e("p",{staticStyle:{width:"25%","text-align":"start"}},[t._v("貸款總計："+t._s((""+(parseInt(this.sum)+parseInt(this.formerSum))).replace(/\B(?=(\d{3})+(?!\d))/g,","))+"元")]),e("p",{staticStyle:{width:"25%","text-align":"start"}},[t._v("總重量："+t._s(this.weight)+"公斤")])])])]),e(p.Z,{staticClass:"print",on:{click:t.printFunc}},[t._v("列印")])],1)},Wa=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"text-align":"center"}},[e("h3",[t._v("出 貨 單")]),e("p",[t._v("年昌碾米工廠 地址: 玉里中華路28號")]),e("p",[t._v("電話: 03-8883066 03-8882066 傳真: 03-8881066")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{display:"flex","border-top":"2px solid #000","border-bottom":"2px solid #000"}},[e("p",{staticStyle:{width:"3%","text-align":"center",margin:"1px 3px"}},[t._v("NO")]),e("p",{staticStyle:{width:"18%","text-align":"start",margin:"1px 3px"}},[t._v("品名")]),e("p",{staticStyle:{width:"8%","text-align":"end",margin:"1px 3px"}},[t._v("數量")]),e("p",{staticStyle:{width:"8%","text-align":"end",margin:"1px 3px"}},[t._v("包數")]),e("p",{staticStyle:{width:"10%","text-align":"end",margin:"1px 3px"}},[t._v("總數量")]),e("p",{staticStyle:{width:"5%","text-align":"end",margin:"1px 3px"}},[t._v("單位")]),e("p",{staticStyle:{width:"8%","text-align":"end",margin:"1px 3px"}},[t._v("單價")]),e("p",{staticStyle:{width:"12%","text-align":"end",margin:"1px 3px"}},[t._v("小計")]),e("p",{staticStyle:{width:"11%","text-align":"center",margin:"1px 3px"}},[t._v("貨運")]),e("p",{staticStyle:{width:"15%","text-align":"start",margin:"1px 3px"}},[t._v("備註")])])}],Va={data:()=>({formerSum:0,sum:0,weight:0,customerInfo:{},trades:[],allTrades:[]}),created(){this.initialize()},methods:{initialize(){this.formerSum=this.$route.query.formerSum,this.sum=this.$route.query.sum,this.weight=this.$route.query.weight,this.trades=this.$store.state.printDataArr,this.customerInfo=this.$store.state.printCustomerInfo},printFunc(){window.print()}}},Fa=Va,Ha=(0,c.Z)(Fa,Ua,Wa,!1,null,"08c1bfcb",null),Ka=Ha.exports,Ya=function(){var t=this,e=t._self._c;return e("div",{staticClass:"receipt"},[e("div",{staticStyle:{position:"relative",width:"812px","background-color":"antiquewhite",overflow:"hidden"}},[t._m(0),"false"==this.$route.query.all?e("div",{staticStyle:{display:"flex"}},[e("div",{staticStyle:{width:"70%","text-align":"left"}},[e("p",[t._v("廠商編號： "+t._s(t.customerInfo.taxId))]),e("p",[t._v("廠商姓名： "+t._s(t.customerInfo.name))]),e("p",[t._v("廠商地址： "+t._s(t.customerInfo.address))])]),e("div",{staticStyle:{width:"30%","text-align":"left"}},[e("p",[t._v("廠商電話： "+t._s(t.customerInfo.homePhone))]),e("p",[t._v("列印日期： "+t._s(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)))])])]):t._e(),"false"==this.$route.query.all?e("div",{staticStyle:{"margin-top":"5px",width:"100%"}},[t._m(1),e("div",{staticStyle:{"min-height":"240px"}},t._l(t.trades,(function(a,i){return e("div",{staticStyle:{display:"flex"}},[e("p",{staticStyle:{width:"10%","text-align":"center",margin:"1px 3px"}},[t._v(t._s(a.made_date.slice(0,10)))]),e("p",{staticStyle:{width:"13%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.name))]),e("p",{staticStyle:{width:"4%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.amount)))]),e("p",{staticStyle:{width:"4%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.package)))]),e("p",{staticStyle:{width:"8%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.totalNumber)))]),e("p",{staticStyle:{width:"5%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(a.sellUint))]),e("p",{staticStyle:{width:"5%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.uintPrice)))]),e("p",{staticStyle:{width:"10%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.aTradePrice)))]),e("p",{staticStyle:{width:"11%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.grandPrice)))]),e("p",{staticStyle:{width:"10%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.transport))]),e("p",{staticStyle:{width:"20%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.comment))])])})),0),e("div",{staticStyle:{width:"99%",display:"flex","border-top":"2px solid #000","border-bottom":"2px solid #000","margin-top":"20px","padding-left":"10px"}},[e("p",{staticStyle:{width:"25%","text-align":"start"}},[t._v("本次銷售："+t._s((""+this.$route.query.sum).replace(/\B(?=(\d{3})+(?!\d))/g,","))+"元")]),e("p",{staticStyle:{width:"25%","text-align":"start"}},[t._v("前次累積："+t._s((""+this.$route.query.formerSum).replace(/\B(?=(\d{3})+(?!\d))/g,","))+"元")]),e("p",{staticStyle:{width:"25%","text-align":"start"}},[t._v("貸款總計："+t._s((""+(parseInt(this.$route.query.sum)+parseInt(this.$route.query.formerSum))).replace(/\B(?=(\d{3})+(?!\d))/g,","))+"元")])])]):e("div",{staticStyle:{"margin-top":"5px",width:"100%"}},[t._m(2),e("div",{staticStyle:{"min-height":"240px"}},[t._l(t.trades,(function(a,i){return e("div",[t.diffIndex.includes(i)?e("div",{staticClass:"my-1",staticStyle:{"border-top":"2px solid #000","border-bottom":"2px solid #000"}}):t._e(),e("div",{staticStyle:{display:"flex"}},[e("p",{staticStyle:{width:"14%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.customer_name))]),e("p",{staticStyle:{width:"9%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.made_date.slice(0,10)))]),e("p",{staticStyle:{width:"18%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.name))]),e("p",{staticStyle:{width:"4%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.amount)))]),e("p",{staticStyle:{width:"4%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.package)))]),e("p",{staticStyle:{width:"6%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.totalNumber)))]),e("p",{staticStyle:{width:"4%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(a.sellUint))]),e("p",{staticStyle:{width:"5%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.uintPrice)))]),e("p",{staticStyle:{width:"9%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.aTradePrice)))]),e("p",{staticStyle:{width:"9%","text-align":"end",margin:"1px 3px"}},[t._v(t._s(t.numWithComma(a.grandPrice)))]),e("p",{staticStyle:{width:"7%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.transport))]),e("p",{staticStyle:{width:"10%","text-align":"start",margin:"1px 3px"}},[t._v(t._s(a.comment))])])])})),e("div",{staticClass:"mt-2",staticStyle:{"border-top":"2px solid #000","border-bottom":"2px solid #000"}})],2)])]),e(p.Z,{staticClass:"print",on:{click:t.printFunc}},[t._v("列印")])],1)},Ga=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"text-align":"center"}},[e("h3",[t._v("交 易 紀 錄")]),e("p",[t._v("年昌碾米工廠 地址: 玉里中華路28號")]),e("p",[t._v("電話: 03-8883066 03-8882066 傳真: 03-8881066")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{display:"flex","border-top":"2px solid #000","border-bottom":"2px solid #000"}},[e("p",{staticStyle:{width:"10%","text-align":"center",margin:"1px 3px"}},[t._v("日期")]),e("p",{staticStyle:{width:"13%","text-align":"start",margin:"1px 3px"}},[t._v("品名")]),e("p",{staticStyle:{width:"4%","text-align":"end",margin:"1px 3px"}},[t._v("數量")]),e("p",{staticStyle:{width:"4%","text-align":"end",margin:"1px 3px"}},[t._v("包數")]),e("p",{staticStyle:{width:"8%","text-align":"end",margin:"1px 3px"}},[t._v("總數量")]),e("p",{staticStyle:{width:"5%","text-align":"end",margin:"1px 3px"}},[t._v("單位")]),e("p",{staticStyle:{width:"5%","text-align":"end",margin:"1px 3px"}},[t._v("單價")]),e("p",{staticStyle:{width:"10%","text-align":"end",margin:"1px 3px"}},[t._v("小計")]),e("p",{staticStyle:{width:"11%","text-align":"end",margin:"1px 3px"}},[t._v("累計")]),e("p",{staticStyle:{width:"10%","text-align":"start",margin:"1px 3px"}},[t._v("貨運")]),e("p",{staticStyle:{width:"20%","text-align":"start",margin:"1px 3px"}},[t._v("備註")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{display:"flex","border-top":"2px solid #000","border-bottom":"2px solid #000"}},[e("p",{staticStyle:{width:"14%","text-align":"center",margin:"1px 3px"}},[t._v("顧客")]),e("p",{staticStyle:{width:"9%","text-align":"center",margin:"1px 3px"}},[t._v("日期")]),e("p",{staticStyle:{width:"18%","text-align":"start",margin:"1px 3px"}},[t._v("品名")]),e("p",{staticStyle:{width:"4%","text-align":"end",margin:"1px 3px"}},[t._v("數量")]),e("p",{staticStyle:{width:"4%","text-align":"end",margin:"1px 3px"}},[t._v("包數")]),e("p",{staticStyle:{width:"6%","text-align":"end",margin:"1px 3px"}},[t._v("總數量")]),e("p",{staticStyle:{width:"4%","text-align":"end",margin:"1px 3px"}},[t._v("單位")]),e("p",{staticStyle:{width:"5%","text-align":"end",margin:"1px 3px"}},[t._v("單價")]),e("p",{staticStyle:{width:"9%","text-align":"end",margin:"1px 3px"}},[t._v("小計")]),e("p",{staticStyle:{width:"9%","text-align":"end",margin:"1px 3px"}},[t._v("累計")]),e("p",{staticStyle:{width:"7%","text-align":"start",margin:"1px 3px"}},[t._v("運輸")]),e("p",{staticStyle:{width:"10%","text-align":"start",margin:"1px 3px"}},[t._v("備註")])])}],Ja={data:()=>({customerInfo:{},trades:[],diffIndex:[]}),created(){this.initialize()},methods:{initialize(){this.trades=this.$store.state.printDataArr,this.customerInfo=this.$store.state.printCustomerInfo;var t=this.trades[0].customer_name;this.trades.forEach((e=>{t!=e.customer_name&&this.diffIndex.push(this.trades.indexOf(e)),t=e.customer_name}))},printFunc(){window.print()},numWithComma(t){return t?(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,","):0}}},Qa=Ja,Xa=(0,c.Z)(Qa,Ya,Ga,!1,null,"7a0bc21e",null),ti=Xa.exports;i.ZP.use(h.ZP);const ei=[{path:"/",name:"root",component:Y},{path:"/outwards",name:"outwards",component:$t},{path:"/inwards",name:"inwards",component:ze},{path:"/register",name:"register",component:lt},{path:"/login",name:"login",component:pt},{path:"/outwards/customer",name:"customer",component:Lt},{path:"/outwards/transport",name:"transport",component:Kt},{path:"/outwards/product",name:"product",component:ne},{path:"/outwards/sellUint",name:"sellUint",component:Ze},{path:"/outwards/cashMethod",name:"cashMethod",component:Se},{path:"/outwards/trade/:customerName",name:"trade",component:ve},{path:"/inwards/customer",name:"inwardsCustomer",component:Ue},{path:"/inwards/product",name:"inwardsProduct",component:ga},{path:"/inwards/ricekind",name:"inwardsRicekind",component:ka},{path:"/inwards/trade/:customerName",name:"inwardsTrade",component:ua},{path:"/inwards/printenvelope",name:"printEnvelope",component:Da},{path:"/inwards/printtrade",name:"printInwardsTrade",component:ja},{path:"/inwards/printothertrade",name:"printInwardsOtherTrade",component:Aa},{path:"/outwards/printsometrade",name:"printOutwardsSomeTrade",component:Ka},{path:"/outwards/printalltrade",name:"printOutwardsAllTrade",component:ti}],ai=new h.ZP({mode:"hash",base:"/",routes:ei});var ii=ai,si=a(3678),ni=a(629),ri=a(4702);i.ZP.use(ni.ZP);var di=new ni.ZP.Store({plugins:[(0,ri.Z)({storage:window.sessionStorage})],strict:!0,state:{token:null,user:null,isUserLoggedIn:!1,isPrint:!1,printDataArr:[],printCustomerInfo:{}},getters:{},mutations:{setToken(t,e){t.token=e,t.isUserLoggedIn=!!e},setUser(t,e){t.user=e},setPrintData(t,e){t.printDataArr=e},setPrinCustomer(t,e){t.printCustomerInfo=e}},actions:{setToken({commit:t},e){t("setToken",e)},setUser({commit:t},e){t("setUser",e)},setPrintData({commit:t},e){t("setPrintData",e)},setPrintCustomer({commit:t},e){t("setPrinCustomer",e)}},modules:{}}),li=a(1705);i.ZP.use(li.Z);var oi=new li.Z({}),ci=a(8692),mi=a(6540);i.ZP.use(ci.Z),i.ZP.component("downloadExcel",mi.Z),i.ZP.config.productionTip=!1,(0,si.Z)(di,ii),new i.ZP({router:ii,store:di,vuetify:oi,render:t=>t(u)}).$mount("#app")}},e={};function a(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={exports:{}};return t[i](n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,i,s,n){if(!i){var r=1/0;for(c=0;c<t.length;c++){i=t[c][0],s=t[c][1],n=t[c][2];for(var d=!0,l=0;l<i.length;l++)(!1&n||r>=n)&&Object.keys(a.O).every((function(t){return a.O[t](i[l])}))?i.splice(l--,1):(d=!1,n<r&&(r=n));if(d){t.splice(c--,1);var o=s();void 0!==o&&(e=o)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[i,s,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,n,r=i[0],d=i[1],l=i[2],o=0;if(r.some((function(e){return 0!==t[e]}))){for(s in d)a.o(d,s)&&(a.m[s]=d[s]);if(l)var c=l(a)}for(e&&e(i);o<r.length;o++)n=r[o],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(c)},i=self["webpackChunkclient"]=self["webpackChunkclient"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(8919)}));i=a.O(i)})();
//# sourceMappingURL=app.5fa65611.js.map